"use strict";(self.webpackChunkreact_rule_tree=self.webpackChunkreact_rule_tree||[]).push([[712],{35973:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(30350),a=e(46451),h=e(55241),E=e(96365),y=e(86738),u=e(71577),D=e(34041),s=e(67294),d=e(43306),L=e(2903),r=e(85893),c=a.Z.useForm,p=function(j){return(0,r.jsx)(h.Z,{title:(0,r.jsx)(E.Z,{value:j.value,onChange:function(T){j.onChange(T.target.value)}}),children:j.value})};g.default=function(){var P=c(),j=O()(P,1),C=j[0],T=(0,s.useRef)(),b=(0,s.useState)({relation:"and",children:[{name:"1"},{name:"2"},{relation:"and",children:[{name:"foo"},{name:"bar"}]}]}),W=O()(b,2),R=W[0],x=W[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(a.Z,{form:C,onValuesChange:function(A,ie){console.log(ie),x(ie.rule)},children:(0,r.jsx)(a.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:R,required:!0,children:(0,r.jsx)(d.ZP,{actionRef:T,fields:[{name:"name",rules:[{required:!0}],initialValue:"1",render:function(A,ie,fe){return(0,r.jsx)(p,{},"test-".concat(fe.index))}}],actionsRender:function(A,ie){return A.type==="FIELD"?{remove:(0,r.jsx)(y.Z,{title:"\u4E11\u5417\uFF1F\u4E11\u5C31\u5BF9\u4E86",onConfirm:function(){ie.remove()},children:(0,r.jsx)(u.ZP,{style:{backgroundColor:"#"+(Math.random()*16777215<<0).toString(16)},disabled:A.disabled,children:"remove"})})}:{}},relationWidth:130,relation:function(){return(0,r.jsxs)(D.Z,{style:{width:72},children:[(0,r.jsx)(D.Z.Option,{value:"and",children:"AND"}),(0,r.jsx)(D.Z.Option,{value:"or",children:"OR"})]})}})})})}),(0,r.jsx)(M.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(R),valueType:"jsonCode"})]})}},52662:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(46451),a=e(96365),h=e(34041),E=e(67294),y=e(43306),u=e(85893),D=M.Z.useForm;g.default=function(){var s=D(),d=O()(s,1),L=d[0];return(0,u.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,u.jsx)(M.Z,{form:L,onValuesChange:function(c,p){console.log(p)},children:(0,u.jsx)(M.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"},{relation:"and",children:[{name:"lululu",sex:"1"}]}]},required:!0,children:(0,u.jsx)(y.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,u.jsx)(a.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(h.Z.Option,{value:"0",children:"\u7537"}),(0,u.jsx)(h.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(h.Z.Option,{value:"and",children:"and"}),(0,u.jsx)(h.Z.Option,{value:"or",children:"or"})]}),canAddRule:function(c){return c.depth!==2}})})})})}},16141:function(oe,g,e){e.r(g);var Z=e(97857),O=e.n(Z),M=e(5574),a=e.n(M),h=e(30350),E=e(46451),y=e(96365),u=e(34041),D=e(67294),s=e(43306),d=e(85893),L=E.Z.useForm;g.default=function(){var r=L(),c=a()(r,1),p=c[0],P=(0,D.useState)({relation:"or",collapse:!1,children:[{relation:"and",collapse:!1,children:[{name:"\u70B9\u4E0B\u4E00\u4E2A\u5173\u7CFB\u8282\u70B9\u7684+\u8BD5\u8BD5"}]},{relation:"and",collapse:!0,children:[{name:""},{relation:"and",collapse:!1,children:[{name:""},{relation:"and",collapse:!0,children:[{name:""},{relation:"and",collapse:!1,children:[{name:""}]},{relation:"and",collapse:!1,children:[{name:""}]}]},{relation:"and",collapse:!1,children:[{name:""},{relation:"and",collapse:!1,children:[{name:""}]}]}]}]}]}),j=a()(P,2),C=j[0],T=j[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,d.jsx)(E.Z,{form:p,onValuesChange:function(W,R){console.log(R),T(R)},children:(0,d.jsx)(E.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:C,required:!0,children:(0,d.jsx)(s.ZP,{collapsible:!0,fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(W){var R=W.getFieldError().length&&{borderColor:"red"};return(0,d.jsx)(y.Z,{style:O()({height:32},R)})}}],relation:(0,d.jsxs)(u.Z,{style:{width:80},children:[(0,d.jsx)(u.Z.Option,{value:"and",children:"and"}),(0,d.jsx)(u.Z.Option,{value:"or",children:"or"})]})})})})}),(0,d.jsx)(h.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(C),valueType:"jsonCode"})]})}},10187:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(46451),a=e(96365),h=e(34041),E=e(67294),y=e(43306),u=e(85893),D=M.Z.useForm;g.default=function(){var s=D(),d=O()(s,1),L=d[0];return(0,u.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,u.jsxs)(M.Z,{form:L,onValuesChange:function(c,p){console.log(p)},children:[(0,u.jsx)(M.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"1"}]},required:!0,children:(0,u.jsx)(y.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,u.jsx)(a.Z,{style:{height:32}})}},{name:"hide",render:function(){return!1}},{name:"sex",initialValue:"0",render:function(c){var p=c.getFieldValue("name");return p==="love"?(0,u.jsx)("div",{children:"is just a lie."}):(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(h.Z.Option,{value:"0",children:"\u7537"}),(0,u.jsx)(h.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(h.Z.Option,{value:"and",children:"and"}),(0,u.jsx)(h.Z.Option,{value:"or",children:"or"})]})})}),'\u5C1D\u8BD5\u8F93\u5165 "love"']})})}},17109:function(oe,g,e){e.r(g);var Z=e(97857),O=e.n(Z),M=e(5574),a=e.n(M),h=e(455),E=e(30350),y=e(46451),u=e(84567),D=e(96365),s=e(34041),d=e(67294),L=e(43306),r=e(85893),c=y.Z.useForm,p=function(j){var C=j.value,T=j.onChange;return(0,r.jsx)(u.Z,{checked:C,onChange:function(W){T(W.target.checked)},children:C?"\u5F00\u542F":"\u5173\u95ED"})};g.default=function(){var P=c(),j=a()(P,1),C=j[0],T=(0,d.useState)({relation:"or",children:[{name:"123",sex:"1"}]}),b=a()(T,2),W=b[0],R=b[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(y.Z,{form:C,onValuesChange:function(V,A){console.log(A),R(A)},children:(0,r.jsx)(y.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:W,required:!0,children:(0,r.jsx)(L.ZP,{copyable:!0,fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(V){var A=V.getFieldError().length&&{borderColor:"red"};return(0,r.jsx)(D.Z,{style:O()({height:32},A)})}},{name:"check",render:function(){return(0,r.jsx)(p,{})}},{name:"sex",initialValue:"0",render:function(){return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(s.Z.Option,{value:"0",children:"\u7537"}),(0,r.jsx)(s.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,r.jsxs)(s.Z,{style:{width:80},children:[(0,r.jsx)(s.Z.Option,{value:"and",children:"and"}),(0,r.jsx)(s.Z.Option,{value:"or",children:"or"})]}),relationWidth:120})})})}),(0,r.jsx)(h.ZP,{children:(0,r.jsx)(E.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(W),valueType:"jsonCode"})})]})}},65452:function(oe,g,e){e.r(g);var Z=e(97857),O=e.n(Z),M=e(5574),a=e.n(M),h=e(46451),E=e(96365),y=e(34041),u=e(67294),D=e(43306),s=e(85893),d=h.Z.useForm;g.default=function(){var L=d(),r=a()(L,1),c=r[0],p=(0,u.useState)({relation:"or",children:[{name:"123",sex:"1"}]}),P=a()(p,2),j=P[0],C=P[1],T=(0,u.useRef)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,s.jsx)(h.Z,{form:c,onFinish:function(){T.current.validate()},onValuesChange:function(W,R){console.log(R),C(R)},children:(0,s.jsx)(h.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:j,required:!0,children:(0,s.jsx)(D.ZP,{actionRef:T,description:(0,s.jsx)("div",{style:{lineHeight:"32px"},children:"\u8FD9\u662F\u4E00\u4E2A\u989D\u5916\u7684 32px \u9AD8\u7684\u533A\u57DF"}),fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(W){var R=W.getFieldError().length&&{borderColor:"red"};return(0,s.jsx)(E.Z,{style:O()({height:32},R)})}},{name:"sex",initialValue:"0",render:function(){return(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(y.Z.Option,{value:"0",children:"\u7537"}),(0,s.jsx)(y.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,s.jsxs)(y.Z,{style:{width:80},children:[(0,s.jsx)(y.Z.Option,{value:"and",children:"and"}),(0,s.jsx)(y.Z.Option,{value:"or",children:"or"})]}),relationWidth:120})})})})})}},44723:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(46451),a=e(96365),h=e(34041),E=e(72269),y=e(67294),u=e(43306),D=e(85893),s=M.Z.useForm;g.default=function(){var d=s(),L=O()(d,1),r=L[0],c=(0,y.useState)(!0),p=O()(c,2),P=p[0],j=p[1];return(0,D.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,D.jsxs)(M.Z,{form:r,onValuesChange:function(T,b){console.log(b)},children:[(0,D.jsx)(M.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"},{relation:"and",children:[{name:"lululu",sex:"1"}]}]},required:!0,children:(0,D.jsx)(u.ZP,{hideButton:P,canAddRule:function(){return"hide"},canAddRuleGroup:function(){return!1},disabled:P,fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,D.jsx)(a.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,D.jsxs)(h.Z,{disabled:!0,children:[(0,D.jsx)(h.Z.Option,{value:"0",children:"\u7537"}),(0,D.jsx)(h.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:function(){return(0,D.jsxs)(h.Z,{disabled:!0,children:[(0,D.jsx)(h.Z.Option,{value:"and",children:"and"}),(0,D.jsx)(h.Z.Option,{value:"or",children:"or"})]})}})}),"disabled \u5F00\u5173\uFF1A",(0,D.jsx)(E.Z,{defaultChecked:!0,onChange:function(){j(!P)}})]})})}},24493:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(46451),a=e(96365),h=e(34041),E=e(42075),y=e(71577),u=e(67294),D=e(43306),s=e(85893),d=M.Z.useForm;g.default=function(){var L=d(),r=O()(L,1),c=r[0],p=[{name:"fooooo",sex:"0"},{name:"bar",sex:"1"}];return(0,s.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,s.jsxs)(M.Z,{form:c,onFinish:function(){},onValuesChange:function(j,C){console.log(C)},children:[(0,s.jsx)(M.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"1"}]},required:!0,children:(0,s.jsx)(D.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,s.jsx)(a.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(j){var C=j.getFieldValue("name");return C==="1024"?(0,s.jsx)("div",{children:"ho!!"}):(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(h.Z.Option,{value:"0",children:"\u7537"}),(0,s.jsx)(h.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(h.Z.Option,{value:"and",children:"and"}),(0,s.jsx)(h.Z.Option,{value:"or",children:"or"})]}),text:{addRule:"Add Rule",addRelation:"Add Relation"},cascades:["name"],onCascade:function(j){console.log("onCascade"),j.setFieldValue("sex","1")},extraDragItemRender:function(j){return(0,s.jsx)("div",{children:(0,s.jsx)(E.Z,{direction:"vertical",children:p.map(function(C){return(0,s.jsxs)(E.Z,{children:["\u5916\u90E8\u6570\u636E:",j({data:C,onDragEnd:function(){console.log("end")},render:function(b){return(0,s.jsx)(y.ZP,{children:JSON.stringify(b)})}})]},JSON.stringify(C))})})})}})}),(0,s.jsx)(y.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})})}},60401:function(oe,g,e){e.r(g);var Z=e(15009),O=e.n(Z),M=e(99289),a=e.n(M),h=e(5574),E=e.n(h),y=e(97857),u=e.n(y),D=e(46451),s=e(83062),d=e(96365),L=e(34041),r=e(71577),c=e(67294),p=e(43306),P=e(85893),j=D.Z.useForm,C=function(b){var W=b.title,R=b.visible,x=b.value,V=b.onChange,A=b.errorStyle;return(0,P.jsx)(s.Z,{color:"red",title:W,visible:R,children:(0,P.jsx)(d.Z,{value:x,onChange:V,style:u()({height:32},A)})})};g.default=function(){var T=j(),b=E()(T,1),W=b[0],R=(0,c.useRef)();return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,P.jsxs)(D.Z,{form:W,onFinish:a()(O()().mark(function x(){return O()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.prev=0,A.next=3,R.current.validate();case 3:A.next=9;break;case 5:A.prev=5,A.t0=A.catch(0),console.log(A.t0),R.current.reRender();case 9:case"end":return A.stop()}},x,null,[[0,5]])})),onValuesChange:function(V,A){console.log("onValuesChange",A)},children:[(0,P.jsx)(D.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"and",children:[{name:"\u5220\u6389\u6211",sex:""}]},required:!0,children:(0,P.jsx)(p.ZP,{actionRef:R,fields:[{name:"name",rules:[{required:!0,message:"\u5FC5\u586B\u9879\uFF01"}],initialValue:"",render:function(V){var A=V.getFieldError().length&&{borderColor:"red",outline:"none"};return(0,P.jsx)(C,{errorStyle:A,title:V.getFieldError()[0],visible:!!V.getFieldError().length})}},{name:"sex",initialValue:"0",render:function(V){var A=V.getFieldValue("name");return A==="1024"?(0,P.jsx)("div",{children:"ho!!"}):(0,P.jsxs)(L.Z,{children:[(0,P.jsx)(L.Z.Option,{value:"0",children:"\u7537"}),(0,P.jsx)(L.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,P.jsxs)(L.Z,{style:{width:60},children:[(0,P.jsx)(L.Z.Option,{value:"and",children:"and"}),(0,P.jsx)(L.Z.Option,{value:"or",children:"or"})]})})}),(0,P.jsx)(r.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})})})}},85682:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(46451),a=e(96365),h=e(34041),E=e(67294),y=e(43306),u=e(85893),D=M.Z.useForm;g.default=function(){var s=D(),d=O()(s,1),L=d[0];return(0,u.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,u.jsx)(M.Z,{form:L,onValuesChange:function(c,p){console.log(p)},children:(0,u.jsx)(M.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"},{relation:"and",children:[{name:"lululu",sex:"1"}]}]},required:!0,children:(0,u.jsx)(y.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,u.jsx)(a.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,u.jsxs)(h.Z,{children:[(0,u.jsx)(h.Z.Option,{value:"0",children:"\u7537"}),(0,u.jsx)(h.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:function(c){var p=!c.parent;return p?(0,u.jsx)("div",{children:"\u6839\u8282\u70B9"}):(0,u.jsxs)("select",{children:[(0,u.jsx)("option",{value:"and",children:"and"}),(0,u.jsx)("option",{value:"or",children:"or"})]})},canAddRule:function(c){return c.depth!==2}})})})})}},37799:function(oe,g,e){e.r(g);var Z=e(96365),O=e(34041),M=e(43306),a=e(85893);g.default=function(){return(0,a.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,a.jsx)(M.ZP,{noDrag:!0,defaultValue:{relation:"and",children:[{name:"\u4E0D\u70AB\u9177\u4E86"},{name:"\u6CA1\u7075\u9B42\u4E86"}]},onChange:function(E){console.log(E)},fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,a.jsx)(Z.Z,{style:{height:32}})}}],relation:(0,a.jsxs)(O.Z,{children:[(0,a.jsx)(O.Z.Option,{value:"and",children:"and"}),(0,a.jsx)(O.Z.Option,{value:"or",children:"or"})]})})})}},48014:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(455),a=e(30350),h=e(46451),E=e(34041),y=e(42075),u=e(71577),D=e(67294),s=e(43306),d=e(85893),L=h.Z.useForm,r=function(p){var P=p.value,j=p.onChange;return _jsx(Checkbox,{checked:P,onChange:function(T){j(T.target.checked)},children:P?"\u5F00\u542F":"\u5173\u95ED"})};g.default=function(){var c=L(),p=O()(c,1),P=p[0],j=(0,D.useState)({relation:"or",children:[{name:"1"}]}),C=O()(j,2),T=C[0],b=C[1],W=(0,D.useRef)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,d.jsxs)(h.Z,{form:P,onFinish:function(){W.current.validate()},onValuesChange:function(x,V){console.log(V),b(V)},children:[(0,d.jsx)(h.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:T,required:!0,children:(0,d.jsx)(s.ZP,{actionRef:W,onFieldChange:function(){for(var x=arguments.length,V=new Array(x),A=0;A<x;A++)V[A]=arguments[A];console.log({args:V})},fields:[{name:"name",rules:[{required:!0}],initialValue:"1",render:function(){return(0,d.jsxs)(E.Z,{children:[(0,d.jsx)(E.Z.Option,{value:"1",children:"1111111"}),(0,d.jsx)(E.Z.Option,{value:"2",children:"2222222"})]})}}],relation:(0,d.jsxs)(E.Z,{style:{width:80},children:[(0,d.jsx)(E.Z.Option,{value:"and",children:"and"}),(0,d.jsx)(E.Z.Option,{value:"or",children:"or"})]}),relationWidth:120,text:{addRule:"Add Rule",addRelation:"Add Relation"},cascades:["name"],onCascade:function(x){console.log("onCascade"),x.setFieldValue("sex","1")},shouldRemoveRelation:function(x){return console.log(x),x.data.name==="2"}})}),(0,d.jsx)(y.Z,{children:(0,d.jsx)(u.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})})]})}),(0,d.jsx)(M.ZP,{children:(0,d.jsx)(a.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(T),valueType:"jsonCode"})})]})}},87898:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(97857),a=e.n(M),h=e(30350),E=e(46451),y=e(83062),u=e(96365),D=e(34041),s=e(71577),d=e(5914),L=e(67294),r=e(43306),c=e(85893),p=E.Z.useForm,P=function(C){var T=C.value,b=C.onChange,W=C.ctx,R=C.errorStyle;return(0,c.jsx)(y.Z,{color:"red",title:W.getFieldError()[0],visible:!!W.getFieldError().length,children:(0,c.jsx)(u.Z,{value:T,onChange:b,style:a()({height:32},R)})})};g.default=function(){var j=p(),C=O()(j,1),T=C[0],b=(0,L.useRef)(),W=(0,L.useState)(null),R=O()(W,2),x=R[0],V=R[1],A=(0,L.useState)(),ie=O()(A,2),fe=ie[0],Be=ie[1],We=p(),je=O()(We,1),se=je[0],k=(0,L.useState)(!1),me=O()(k,2),Ce=me[0],xe=me[1];return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:[(0,c.jsxs)(E.Z,{form:T,onValuesChange:function(te,Me){console.log("onValuesChange",Me)},children:[(0,c.jsx)(E.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"and"},required:!0,children:(0,c.jsx)(r.ZP,{actionRef:b,onFieldFocus:function(te,Me,ye,he){V(te),Be(he),xe(!0)},fields:[{name:"name",rules:[{required:!0,message:"\u5FC5\u586B\u9879\uFF01"}],initialValue:"",render:function(te){var Me=te.getFieldError().length&&{borderColor:"red",outline:"none"};return(0,c.jsx)(P,{errorStyle:Me,ctx:te})}},{name:"sex",initialValue:"0",render:function(te){var Me=te.getFieldValue("name");return Me==="1024"?(0,c.jsx)("div",{children:"ho!!"}):(0,c.jsxs)(D.Z,{children:[(0,c.jsx)(D.Z.Option,{value:"0",children:"\u7537"}),(0,c.jsx)(D.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,c.jsxs)(D.Z,{style:{width:60},children:[(0,c.jsx)(D.Z.Option,{value:"and",children:"and"}),(0,c.jsx)(D.Z.Option,{value:"or",children:"or"})]})})}),(0,c.jsx)(s.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]}),(0,c.jsxs)(d.Z,{visible:Ce,onOk:function(){se.validateFields().then(function(te){b.current.setData(x,te),xe(!1)})},onCancel:function(){xe(!1)},title:"\u590D\u6742\u7684\u7F16\u8F91\u6D41\u7A0B",children:["\u5173\u6CE8\u7684\u8282\u70B9\uFF1A",(0,c.jsx)(h.ZP,{mode:"read",valueType:"jsonCode",value:JSON.stringify(fe)}),"key\u4E3A\uFF1A",x,(0,c.jsxs)(E.Z,{form:se,children:[(0,c.jsx)(E.Z.Item,{name:"name",label:"\u5916\u90E8\u7F16\u8F91name",children:(0,c.jsx)(u.Z,{})}),(0,c.jsx)(E.Z.Item,{name:"sex",label:"\u5916\u90E8\u7F16\u8F91label",children:(0,c.jsxs)(D.Z,{children:[(0,c.jsx)(D.Z.Option,{value:"0",children:"\u7537"}),(0,c.jsx)(D.Z.Option,{value:"1",children:"\u5973"})]})})]})]})]})})}},53906:function(oe,g,e){e.r(g),e.d(g,{default:function(){return We},initRuleData:function(){return A}});var Z=e(15009),O=e.n(Z),M=e(99289),a=e.n(M),h=e(5574),E=e.n(h),y=e(97857),u=e.n(y),D=e(19632),s=e.n(D),d=e(47389),L=e(82061),r=e(46451),c=e(42075),p=e(71577),P=e(85265),j=e(96365),C=e(86738),T=e(96486),b=e.n(T),W=e(67294),R=e(43306),x=e(85893),V=[{value:"name",label:"\u540D\u79F0"},{value:"section",label:"\u79D1"},{value:"family",label:"\u5C5E"}],A=[{name:"\u8C79",section:"\u8C79\u4E9A\u79D1",family:"\u5927\u578B\u732B\u79D1",children:[{name:"\u96EA\u8C79",section:"\u8C79\u79D1",family:"\u8C79\u5C5E"}]},{name:"\u732B",section:"\u732B\u4E9A\u79D1",family:"\u5C0F\u578B\u732B\u79D1"}],ie=function je(se){return se==null?void 0:se.map(function(k){var me=k.name,Ce=k.section,xe=k.family,ae=k.children,te={};return ae&&ae.length&&(te.children=je(s()(ae)),te.relation={name:me,section:Ce,family:xe}),u()({node:{name:me,section:Ce,family:xe}},te)})},fe=function(se){var k=se.value,me=se.onChange,Ce=r.Z.useForm(),xe=E()(Ce,1),ae=xe[0],te=(0,W.useState)(!1),Me=E()(te,2),ye=Me[0],he=Me[1],De=k||{},ge=De.name,Ke=ge===void 0?"\u540D\u79F0":ge,v=De.section,Ye=v===void 0?"\u79D1":v,Fe=De.family,_n=Fe===void 0?"\u5C5E":Fe,Je=function(){ae.validateFields().then(function(vn){me(vn),ae.resetFields(),he(!1)})},cn=(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(p.ZP,{onClick:function(){ae.resetFields(),he(!1)},children:"\u53D6\u6D88"}),(0,x.jsx)(p.ZP,{type:"primary",onClick:Je,children:"\u786E\u5B9A"})]});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(c.Z,{align:"baseline",style:{whiteSpace:"nowrap"},children:[Ke,"\u3001",Ye,"\u3001",_n,(0,x.jsx)(d.Z,{onClick:function(){ae.setFieldsValue(k),he(!0)}})]}),ye?(0,x.jsx)(P.Z,{open:ye,destroyOnClose:!0,width:"600px",onClose:function(){ae.resetFields(),he(!1)},extra:cn,title:"\u7F16\u8F91",children:(0,x.jsx)(r.Z,{form:ae,labelCol:{span:4},children:V.map(function(pe){return(0,x.jsx)(r.Z.Item,{name:pe.value,label:pe.label,rules:[{required:!0}],children:(0,x.jsx)(j.Z,{})},pe.value)})})}):null]})},Be=function(se){var k=se.value,me=se.onChange;return(0,x.jsx)("div",{className:"relation-node",style:{whiteSpace:"nowrap"},children:k!=null&&k.isRoot?(0,x.jsx)("span",{children:k==null?void 0:k.name}):(0,x.jsx)(fe,{value:k,onChange:me,editNodeFields:V})})};function We(){var je=(0,W.useRef)(),se={relation:{name:"\u732B\u79D1\u7269\u79CD",isRoot:!0},children:ie(A)},k=(0,W.useState)(se),me=E()(k,2),Ce=me[0],xe=me[1],ae=function ye(he,De){var ge=b().cloneDeep(he);if(De&&De.length===1)return b().remove(ge,function(Ye,Fe){return Number(De[0])!==Fe});var Ke=De.shift(),v=ge[Ke].children;return ge[Ke].children=ye(v,De),ge},te=function(){var ye=a()(O()().mark(function he(De){var ge,Ke,v,Ye,Fe;return O()().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:ge=Ce||{},Ke=ge.children,v=Ke===void 0?[]:Ke,Ye=De.namePath,Fe=ae(v,Ye),xe(u()(u()({},se),{},{children:Fe}));case 4:case"end":return Je.stop()}},he)}));return function(De){return ye.apply(this,arguments)}}(),Me=function(he){return{remove:(0,x.jsx)(c.Z,{size:6,children:(0,x.jsx)(C.Z,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u6761\u6570\u636E\u4EE5\u53CA\u5B50\u6570\u636E",onConfirm:function(){te(he)},children:(0,x.jsx)(L.Z,{})})})}};return(0,x.jsx)(R.ZP,{actionRef:je,value:Ce,style:{marginLeft:"-160px",overflowY:"auto"},fields:[{name:"node",render:function(){return(0,x.jsx)(fe,{editNodeFields:V})}}],onChange:function(he){return xe(he)},relation:function(){return(0,x.jsx)(Be,{})},actionsRender:Me,id:"rule",relationWidth:260,modifyTreeNode:function(){return{removable:!0}},text:{addRule:"\u6DFB\u52A0\u4E00\u5217\u6570\u636E",addRelation:"\u6DFB\u52A0\u4E00\u7EC4\u6570\u636E"}})}},2708:function(oe,g,e){e.r(g);var Z=e(97857),O=e.n(Z),M=e(5574),a=e.n(M),h=e(30350),E=e(46451),y=e(96365),u=e(34041),D=e(67294),s=e(43306),d=e(85893),L=E.Z.useForm;g.default=function(){var r=L(),c=a()(r,1),p=c[0],P=(0,D.useState)({relation:"or",children:[{relation:"and"},{relation:"and"},{relation:"and"}]}),j=a()(P,2),C=j[0],T=j[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,d.jsx)(E.Z,{form:p,onValuesChange:function(W,R){console.log(R),T(R)},children:(0,d.jsx)(E.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:C,required:!0,children:(0,d.jsx)(s.ZP,{fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(W){var R=W.getFieldError().length&&{borderColor:"red"};return(0,d.jsx)(y.Z,{style:O()({height:32},R)})}}],modifyTreeNode:function(){return{removable:!0}},relationWidth:144,relation:(0,d.jsxs)(u.Z,{style:{width:84},children:[(0,d.jsx)(u.Z.Option,{value:"and",children:"and"}),(0,d.jsx)(u.Z.Option,{value:"or",children:"or"})]})})})})}),(0,d.jsx)(h.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(C),valueType:"jsonCode"})]})}},22129:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(30350),a=e(46451),h=e(55241),E=e(96365),y=e(34041),u=e(67294),D=e(43306),s=e(2903),d=e(85893),L=a.Z.useForm,r=function(p){return(0,d.jsx)(h.Z,{title:(0,d.jsx)(E.Z,{value:p.value,onChange:function(j){p.onChange(j.target.value)}}),children:p.value})};g.default=function(){var c=L(),p=O()(c,1),P=p[0],j=(0,u.useState)({relation:"and",children:[{name:"1"},{relation:"and",children:[{name:"2"}]}]}),C=O()(j,2),T=C[0],b=C[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,d.jsx)(a.Z,{form:P,onValuesChange:function(R,x){console.log(x),b(x.rule)},children:(0,d.jsx)(a.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:T,required:!0,children:(0,d.jsx)(D.ZP,{fields:[{name:"name",rules:[{required:!0}],initialValue:"1",render:function(R,x,V){return(0,d.jsx)(r,{},"test-".concat(V.index))}}],modifyTreeNode:function(R){var x=R.type;return{className:x==="FIELD"?"black":"",removable:x==="RELATION"}},relationWidth:132,relation:function(){return(0,d.jsxs)(y.Z,{style:{width:72},children:[(0,d.jsx)(y.Z.Option,{value:"and",children:"AND"}),(0,d.jsx)(y.Z.Option,{value:"or",children:"OR"})]})}})})})}),(0,d.jsx)(M.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(T),valueType:"jsonCode"})]})}},25269:function(oe,g,e){e.r(g);var Z=e(97857),O=e.n(Z),M=e(5574),a=e.n(M),h=e(30350),E=e(46451),y=e(96365),u=e(34041),D=e(71577),s=e(67294),d=e(43306),L=e(2903),r=e(85893),c=E.Z.List,p=E.Z.useForm,P=function(C){return _jsx(Popover,{title:_jsx(Input,{value:C.value,onChange:function(b){C.onChange(b.target.value)}}),children:C.value})};g.default=function(){var j=p(),C=a()(j,1),T=C[0],b=(0,s.useRef)(),W=(0,s.useState)({relation:"and",collapse:!1,children:[{name:"1"},{name:"2"},{relation:"and",collapse:!0,children:[{name:"foo"},{name:"bar"},{relation:"and",collapse:!1,children:[{name:"1"}]},{relation:"and",collapse:!1,children:[{name:"1"}]}]}]}),R=a()(W,2),x=R[0],V=R[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(E.Z,{form:T,onValuesChange:function(ie,fe){console.log(fe)},children:(0,r.jsx)(c,{name:"item",initialValue:[{relation:"and",children:[]}],children:function(ie,fe){var Be=fe.add;return(0,r.jsxs)(r.Fragment,{children:[ie.map(function(We){return console.log(ie),(0,r.jsx)(E.Z.Item,O()(O()({},We),{},{children:(0,r.jsx)(d.ZP,{fields:[{name:"test",render:function(se,k,me){return(0,r.jsx)(y.Z,{})}}],relation:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(u.Z.Option,{value:"and",children:"and"}),(0,r.jsx)(u.Z.Option,{value:"or",children:"or"})]})})}))}),(0,r.jsx)("div",{children:(0,r.jsx)(D.ZP,{onClick:function(){return Be({relation:"and"})},children:"add"})})]})}})})}),(0,r.jsx)("button",{onClick:function(){return b.current.reRender()},children:"re render"}),(0,r.jsx)(h.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(x),valueType:"jsonCode"})]})}},60694:function(oe,g,e){e.r(g);var Z=e(5574),O=e.n(Z),M=e(46451),a=e(96365),h=e(34041),E=e(43306),y=e(85893),u=M.Z.useForm;g.default=function(){var D=u(),s=O()(D,1),d=s[0];return(0,y.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,y.jsx)(M.Z,{form:d,onValuesChange:function(r,c){console.log(c)},children:(0,y.jsx)(M.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"}]},required:!0,children:(0,y.jsx)(E.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,y.jsx)(a.Z,{style:{height:32}})}},{name:"name1",rules:[{required:!0}],render:function(){return(0,y.jsx)(a.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(r){var c=r.getFieldValue("name");return c==="love"?(0,y.jsx)("div",{children:"is just a lie."}):(0,y.jsxs)(h.Z,{children:[(0,y.jsx)(h.Z.Option,{value:"0",children:"\u7537"}),(0,y.jsx)(h.Z.Option,{value:"1",children:"\u5973"})]})}}],cascades:["name","name1"],onCascade:function(r,c){console.log(c),r.setFieldValue("sex","1")},relation:(0,y.jsxs)(h.Z,{children:[(0,y.jsx)(h.Z.Option,{value:"and",children:"and"}),(0,y.jsx)(h.Z.Option,{value:"or",children:"or"})]})})})})})}},85911:function(oe,g,e){e.r(g);var Z=e(97857),O=e.n(Z),M=e(5574),a=e.n(M),h=e(30350),E=e(46451),y=e(96365),u=e(34041),D=e(71577),s=e(67294),d=e(43306),L=e(2903),r=e(85893),c=E.Z.List,p=E.Z.useForm;g.default=function(){var P=p(),j=a()(P,1),C=j[0],T=(0,s.useState)({relation:"and"}),b=a()(T,2),W=b[0],R=b[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(E.Z,{form:C,onValuesChange:function(V,A){console.log(A),R(A)},children:(0,r.jsx)(c,{name:"form-list",initialValue:[W],children:function(V,A){var ie=A.add;return console.log(V),(0,r.jsxs)(r.Fragment,{children:[V.map(function(fe){return console.log(V),(0,r.jsx)(E.Z.Item,O()(O()({},fe),{},{children:(0,r.jsx)(d.ZP,{fields:[{name:"test",render:function(We,je,se){return(0,r.jsx)(y.Z,{})}}],relation:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(u.Z.Option,{value:"and",children:"and"}),(0,r.jsx)(u.Z.Option,{value:"or",children:"or"})]})})}))}),(0,r.jsx)("div",{children:(0,r.jsx)(D.ZP,{onClick:function(){return ie({relation:"and"})},children:"\u6DFB\u52A0\u4E00\u9879"})})]})}})})}),(0,r.jsx)(h.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(W),valueType:"jsonCode"})]})}},87714:function(oe,g,e){e.r(g);var Z=e(96365),O=e(34041),M=e(43306),a=e(85893);g.default=function(){return(0,a.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,a.jsx)(M.ZP,{defaultValue:{relation:"and"},onChange:function(E){console.log(E)},fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,a.jsx)(Z.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,a.jsxs)(O.Z,{children:[(0,a.jsx)(O.Z.Option,{value:"0",children:"\u7537"}),(0,a.jsx)(O.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,a.jsxs)(O.Z,{children:[(0,a.jsx)(O.Z.Option,{value:"and",children:"and"}),(0,a.jsx)(O.Z.Option,{value:"or",children:"or"})]})})})}},43306:function(oe,g,e){e.d(g,{ZP:function(){return rr}});var Z=e(19632),O=e.n(Z),M=e(97857),a=e.n(M),h=e(9783),E=e.n(h),y=e(5574),u=e.n(y),D=e(96486),s=e.n(D),d=e(70129),L=e(60869),r=e(67294),c=e(94906),p,P,j="RELATION",C="FIELD",T="BUTTON",b="PLACEMENT",W=200,R=40,x=100,V=40,A=80,ie=40,fe=50,Be=22,We=100,je=20,se=(p={},E()(p,T,A),E()(p,C,W),E()(p,j,x),p),k=(P={},E()(P,T,ie),E()(P,C,R),E()(P,j,V),P),me=R+Be,Ce="TREE_NODE",xe=e(52677),ae=e.n(xe),te=function(n,o){return{position:"absolute",left:n,top:o}},Me=function(n){var o={},t=function _(i,l){if(i.relation!==void 0){var f;o[(l?"".concat(l,"."):"")+"relation"]=i.relation,(f=i.children)===null||f===void 0||f.forEach(function(X,Q){_(X,(l?"".concat(l,"."):"")+"children."+Q)})}else for(var B in i){var K=i[B];o[(l?"".concat(l,"."):"")+B]=ae()(K)==="object"?s().cloneDeep(K):K}};return t(n,""),o},ye=e(51042),he=e(79961),De=e(94184),ge=e.n(De),Ke=e(51779),v=e(85893),Ye=function(n){var o=n.parentKey,t=n.position,_=n.prefixCls,i=n.text,l=n.canAddRuleDisabled,f=n.canAddRuleGroupDisabled,B=n.handleAdd,K=n.hideAddButton,X=n.hideAddGroupButton,Q=n.hide,$=Q===void 0?!1:Q;return(0,v.jsx)("div",{style:a()(a()(a()({},te(t.x,t.y)),{width:A,height:ie,lineHeight:"".concat(ie,"px")}),{display:$?"none":void 0}),className:"".concat(_,"-node-button-group"),children:(0,v.jsxs)("div",{className:"".concat(_,"-button-fix-size"),children:[!K&&(0,v.jsx)(c.Z,{overlay:(i==null?void 0:i.addRule)||"\u6DFB\u52A0\u89C4\u5219",placement:"top",children:(0,v.jsx)("div",{style:{cursor:l?"not-allowed":"pointer"},className:"".concat(_,"-button-left"),onClick:function(){return!l&&B(o,"FIELD")},children:(0,v.jsx)(ye.Z,{style:{width:se[T]/2,color:"#c7d0d9",display:"flex",justifyContent:"center"},rev:void 0})})}),!X&&(0,v.jsx)(c.Z,{overlay:(i==null?void 0:i.addRelation)||"\u6DFB\u52A0\u89C4\u5219\u7EC4",placement:"top",children:(0,v.jsx)("div",{style:{cursor:f?"not-allowed":"pointer"},className:ge()("".concat(_,"-button-right"),E()({},"no-border",K)),onClick:function(){return!f&&B(o,"RELATION")},children:(0,v.jsx)(he.Z,{style:{width:se[T]/2,color:"#c7d0d9",display:"flex",justifyContent:"center"},rev:void 0})})})]})})},Fe=e(96318),_n=e(41393),Je=function(n){var o=n.toggleCollapse,t=n.child,_=n.relationWidth,i=n.collapse,l=n.hide;return(0,v.jsx)("div",{onClick:function(){o(t.key)},style:{position:"absolute",left:t.position.x+_+4,top:t.position.y+20-11,zIndex:10,display:l?"none":void 0},className:ge()("techui-rule-tree-collapse","techui-rule-tree-collapse-".concat(t.namePath.join("-"))),children:i?(0,v.jsx)(Fe.Z,{style:{color:"#8c8c8c"},rev:void 0}):(0,v.jsx)(_n.Z,{style:{color:"#8c8c8c"},rev:void 0})})},cn=e(98958),pe=function(n){var o=n.children;return(0,v.jsx)("div",{children:(0,v.jsx)("div",{style:{display:"flex",height:"100%",rowGap:8,columnGap:8},children:o.filter(function(t){return!!t}).map(function(t,_){var i,l,f,B=!!(t!=null&&(i=t.props)!==null&&i!==void 0&&(l=i.children)!==null&&l!==void 0&&(f=l.props)!==null&&f!==void 0&&f.__should_not_render__);return(0,v.jsx)("div",{style:{display:B?"none":"block"},children:t},_)})})})},vn=function(n){var o=n.children,t=n.disabled,_=n.thisKey,i=n.namePath,l=n.onMove,f=n.dragger,B=n.currentIndex,K=n.rowConfig,X=(0,cn.c)(function(){return{type:Ce,item:{thisKey:_,namePath:i,from:"internal",currentIndex:B},collect:function(ue){return{isDragging:ue.isDragging()}},end:function(ue,be){var _e=be.getDropResult();if(_e&&ue.from==="internal"){var Ze=_e,Xe=Ze.parentKey,$e=Ze.order,qe=Ze.originOrder;l(_,Xe,$e,qe)}},canDrag:!t}},[_,i]),Q=u()(X,3),$=Q[0].isDragging,z=Q[1],ee=Q[2];return(0,v.jsx)("div",{ref:ee,style:{opacity:$?.5:1,width:"100%"},"data-thiskey":_,children:(0,v.jsx)("div",{className:ge()(K.className),style:{padding:"0px 8px",borderRadius:3},children:(0,v.jsxs)(pe,{children:[K.draggable&&(0,v.jsx)("div",{ref:z,children:f}),(0,v.jsx)(v.Fragment,{children:o})]})})})},Wn=function(n){var o=n.data,t=n.onDrop,_=n.disabled,i=n.children,l=(0,cn.c)(function(){return{type:Ce,item:{data:o,from:"external"},collect:function($){return{isDragging:$.isDragging()}},end:function($,z){var ee=z.getDropResult();ee&&t(s().cloneDeep($.data),ee.parentKey,ee.order)},canDrag:!_}}),f=u()(l,3),B=f[0].isDragging,K=f[1],X=f[2];return(0,v.jsx)("div",{ref:X,style:{opacity:B?"0.5":1},children:(0,v.jsx)("div",{ref:K,children:i})})},Kn=e(98169),Cn=function(n){var o=n.relatedKeys,t=n.children,_=n.parentKey,i=n.order,l=n.namePath,f=(0,Kn.L)(function(){return{accept:Ce,collect:function(q){return{isOver:q.isOver(),canDrop:q.canDrop()}},canDrop:function(q){var ue=q.from;if(ue==="internal")return!(l&&q.namePath&&l.join(".").startsWith(q.namePath.join("."))||o.includes(q.thisKey));if(ue==="external")return!0;throw new Error("Unexpect DragItem property from: ".concat(ue,'. "from" should be "external" or "internal".'))},drop:function(q){return a()(a()({},q),{},{parentKey:_,originOrder:i,order:q.currentIndex<i?i-1:i})}}},[o,_,i,l]),B=u()(f,2),K=B[0],X=K.canDrop,Q=K.isOver,$=B[1],z="";return Q?z=X?"rgb(24,144,255)":"red":z="rgb(145,213,255)",(0,v.jsx)("div",{ref:$,style:{backgroundColor:z,opacity:X?1:0,borderRadius:"3px",border:"dashed 1px rgb(24,144,255)",width:"100%",height:"100%"},"data-p":_,"data-r":o.join(","),"data-namepath":l.join(","),children:t})},xn=function(n){var o=n.x,t=n.y,_=n.children,i=n.hide,l=i===void 0?!1:i;return(0,v.jsx)("div",{style:a()(a()(a()({},te(o,t)),{width:We,height:je}),{display:l?"none":void 0}),children:_})},Fn=e(63679),Zn=e(36963),Vn=function(n){var o=n.children,t=n.noDndProvider;return t?(0,v.jsx)(v.Fragment,{children:o}):(0,v.jsx)(Fn.W,{backend:Zn.PD,children:o})},Sn=e(13769),Mn=e.n(Sn),Nn=e(85175),pn=e(82061),Rn=e(71744),Gn=["fields","onCascade","cascades","copyable","child","form","disabled","handleCopy","handleRemove","onNodeFocus","onFieldFocus","length","actionsRender","onFieldChange"],Hn=function(n){var o=n.fields,t=n.onCascade,_=n.cascades,i=n.copyable,l=n.child,f=n.form,B=n.disabled,K=n.handleCopy,X=n.handleRemove,Q=n.onNodeFocus,$=n.onFieldFocus,z=n.length,ee=n.actionsRender,q=n.onFieldChange,ue=Mn()(n,Gn),be=ue.currentIndex,_e=ue.rowConfig,Ze=Object.keys(_e).filter(function(Re){return _e[Re]}).length>0,Xe=function(){B||K(l.key)},$e=function(){B||X(l.key)},qe=(0,v.jsx)(Nn.Z,{className:"".concat(Ie,"-action-copy"),onClick:Xe,style:{cursor:B?"not-allowed":"pointer",color:"#595959"},rev:void 0}),mn=(0,v.jsx)(pn.Z,{className:"".concat(Ie,"-action-remove"),onClick:$e,style:{cursor:B?"not-allowed":"pointer",color:"#595959"},rev:void 0});if(ee){var hn=ee({type:l.type,namePath:l.namePath,isRoot:!l.parent,data:l.data,disabled:B},{remove:$e,copy:Xe}),tn=hn.remove,en=hn.copy;tn&&(mn=tn),en&&(qe=en)}return(0,r.createElement)(vn,a()(a()({},ue),{},{key:"d-".concat(l.namePath.join(",")),rowConfig:_e,dragger:(0,v.jsx)(Rn.Z,{className:"".concat(Ie,"-action-drag"),style:{color:"#595959"},rev:void 0})}),(0,v.jsxs)(pe,{children:[(0,v.jsx)("div",{onClick:function(){var an={getData:function(){return l.data},getKey:function(){return l.key}};Q&&Q(an)},children:(0,v.jsx)(pe,{children:o&&o.map(function(Re){var an=Re.render,Te=Re.name,Ve=Re.rules,Ge=[l.namePath.join(".")].concat(Te),ln={getFieldValue:function(Oe){return f.getFieldValue([l.namePath.join(".")].concat(Oe))},getFieldError:function(){return f.getFieldError(Ge)},setFieldValue:function(Oe,Ue){f.setFields([{name:[l.namePath.join(".")].concat(Oe),value:Ue}])}},Pe=an(ln,l,{index:be,length:z}),ze=typeof Pe=="string"&&!Pe;ze&&console.error("\u8BF7\u4E0D\u8981\u518D\u4F7F\u7528\u7A7A\u5B57\u7B26\u4E32\u8868\u8FBE\u8BE5\u9879\u4E0D\u6E32\u67D3\uFF0C\u4F7F\u7528 false \u4EE3\u66FF. \u8BE5\u8BED\u6CD5\u5C06\u5728\u4E0B\u4E00\u4E2A major \u7248\u672C\u5F7B\u5E95\u79FB\u9664\u652F\u6301\uFF01");var on=ze||Pe===!1;return(0,v.jsx)("div",{"data-namepath":Ge,style:{minHeight:32},children:(0,v.jsx)(d.gN,{name:Ge,rules:on?void 0:Ve,initialValue:l.data[Te],shouldUpdate:function(Oe,Ue){return!s().isEqual(s().get(Oe,l.namePath),s().get(Ue,l.namePath))},__should_not_render__:on,children:function(Oe){var Ue=function(Se){var Ne,re=ae()(Se)==="object"&&Se.target?Se.target.value:Se;if(q==null||q(Te,re,l.data[Te],l),(Ne=Oe.onChange)===null||Ne===void 0||Ne.call(Oe,Se),t&&_!==null&&_!==void 0&&_.includes(Te)){var nn;t({getFieldError:ln.getFieldError,getFieldValue:ln.getFieldValue,setFieldValue:function(Dn,gn){l.data[Dn]=gn}},Te),(nn=Oe.onChange)===null||nn===void 0||nn.call(Oe,Se)}},Le=function(){$==null||$(l.key,Te,Oe.value,l.data)};return typeof Pe=="function"?(Pe=Pe(Oe.value,Ue),console.error("\u4F7F\u7528 render: ()=>(value,onChange)=>React.ReactElement \u4F1A\u5BFC\u81F4\u6E32\u67D3\u95EE\u9898\uFF0C\u590D\u6742\u7EC4\u4EF6\u8BF7\u4F7F\u7528\uFF1Arender : ()=> <YourComponent />"),(0,v.jsx)("div",{onClick:Le,children:Pe})):r.isValidElement(Pe)?(0,v.jsx)("div",{onClick:Le,children:r.cloneElement(Pe,a()(a()(a()({disabled:B},Pe.props),typeof Pe=="function"?{}:{value:Oe.value,onChange:Ue}),{},{key:"field-component-".concat(Ge.join(","))}))}):(0,v.jsx)("div",{onClick:Le,children:Pe})}})},Ge.join("."))})})}),Ze&&(0,v.jsxs)(pe,{children:[_e.copyable&&qe,_e.removable&&mn]})]}))},Yn=["child","relation","disabled","onRemoveRelation","relationRemovable","getChildrenData","rowConfig","actionsRender"],Jn=function(n){var o=n.child,t=n.relation,_=n.disabled,i=n.onRemoveRelation,l=n.relationRemovable,f=n.getChildrenData,B=n.rowConfig,K=n.actionsRender,X=Mn()(n,Yn),Q=B.removable,$=(0,v.jsx)(pn.Z,{style:{cursor:"pointer"},onClick:function(){i(o.key)},rev:void 0});if(K){var z=K({type:o.type,namePath:o.namePath,isRoot:!o.parent,data:o.data,disabled:_},{remove:function(){i(o.key)}}),ee=z.remove;ee&&($=ee)}return(0,v.jsx)(vn,a()(a()({},X),{},{rowConfig:B,dragger:(0,v.jsx)(Rn.Z,{style:{color:"#595959"},rev:void 0}),children:(0,v.jsxs)(pe,{children:[(0,v.jsx)(d.gN,{name:[o.namePath.join(".")].concat(["relation"]),initialValue:o.data.relation,children:function(ue){var be=typeof t=="function"?t({depth:o.depth,parent:o.parent.data,brothers:o.parent.children.filter(function(_e){return _e.type!==T&&_e.key!==o.key}).map(function(_e){return a()({},_e.data)}),selfData:o.data,data:f(o)}):t;return r.cloneElement(be,a()(a()({disabled:_},be.props),ue))}}),Q&&$]})}))},Xn=function(n){var o=n.prefixCls,t=n.relationWidth,_=n.relation,i=n.disabled,l=n.node,f=n.getChildrenData,B=n.hide,K=n.className,X=n.rowConfig;return(0,v.jsx)("div",{className:ge()("".concat(o,"-node-root"),X.className,E()({},K,K)),style:a()(a()(a()({},te(l.position.x,l.position.y)),{width:t,height:V,lineHeight:"".concat(V,"px")}),B?{display:"none"}:{}),children:(0,v.jsx)(d.gN,{name:["relation"],initialValue:l.data.relation,shouldUpdate:function($,z){var ee="relation";return $[ee]!==z[ee]},children:function($){var z=typeof _=="function"?_({depth:l.depth,parent:null,brothers:null,selfData:l.data,data:f(l)}):_;return r.cloneElement(z,a()(a()({disabled:i},z.props),$))}})})},$n=function(n){var o=n.fromX,t=n.fromY,_=n.toX,i=n.toY,l=n.radius,f=n.stroke,B=f===void 0?"#c7d0d9":f,K=o+(_-o)/2;if(t===i)return r.createElement("path",{d:"M".concat(o,",").concat(t," L").concat(_,",").concat(i),stroke:B,fill:"none",style:{strokeWidth:1}});var X=[];if(l){var Q=i>t?l:-l,$=Math.abs(l);X.push("M".concat(o,",").concat(t," L").concat(K-$,",").concat(t)),X.push("C".concat(K-$,",").concat(t," ").concat(K,",").concat(t," ").concat(K,",").concat(t+Q)),X.push("L".concat(K,",").concat(i-Q)),X.push("C".concat(K,",").concat(i-Q," ").concat(K,",").concat(i," ").concat(K+$,",").concat(i)),X.push("L".concat(_,",").concat(i))}else X.push("M".concat(o,",").concat(t," L").concat(K,",").concat(t)),X.push("M".concat(K,",").concat(t," L").concat(K,",").concat(i)),X.push("M".concat(K,",").concat(i," L").concat(_,",").concat(i));return r.createElement("path",{d:X.join(" "),stroke:B,fill:"none",style:{strokeWidth:1}})},zn=function(n){var o=n.x,t=n.fromY,_=n.toY,i=n.whiteGap,l=i===void 0?20:i,f=o-l,B=[];return B.push("M".concat(o,",").concat(t," L").concat(f,",").concat(t)),B.push("M".concat(f,",").concat(t," L").concat(f,",").concat(_)),B.push("M".concat(f,",").concat(_," L").concat(o,",").concat(_)),r.createElement("path",{d:B.join(" "),stroke:"#c7d0d9",fill:"none",style:{strokeWidth:1}})},Qn=e(12444),kn=e.n(Qn),wn=e(72004),qn=e.n(wn),Tn=function(){function de(n,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=arguments.length>3?arguments[3]:void 0;kn()(this,de),E()(this,"root",void 0),E()(this,"nodes",[]),E()(this,"key",0),E()(this,"collapsible",!1),this.root=this.createNode(n,o,!1,_),this.nodes.push(this.root),this.collapsible=t}return qn()(de,[{key:"isRoot",value:function(o){return o===this.root}},{key:"getRoot",value:function(){return this.root}},{key:"toggleCollapse",value:function(o){var t=this.findByKey(o);t.collapse=!t.collapse}},{key:"shouldCollapse",value:function(o){for(var t=this.findByKey(o),_=t.collapse,i=t;i.parent;){if(i.parent.collapse){_=!0;break}i=i.parent}return _}},{key:"createNode",value:function(o,t){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.key+=1,{data:o,parent:void 0,children:void 0,key:this.key-1,depth:this.root?NaN:0,height:NaN,type:t,namePath:[],collapse:_,preserveData:i}}},{key:"dfs",value:function(o,t){var _=this;o.children&&o.children.forEach(function(i){_.dfs(i,t),t(i)}),t(o)}},{key:"bfs",value:function(o,t){var _=this;t(o),o.children&&o.children.forEach(function(i){_.bfs(i,t)})}},{key:"find",value:function(o,t){var _;return this.bfs(this.root,function(i){i[o]===t&&(_=i)}),_}},{key:"findByKey",value:function(o){return this.nodes.find(function(t){return t.key===o})}},{key:"appendToRoot",value:function(o){var t=this.root.key;this.appendByKey(t,o)}},{key:"appendByKey",value:function(o,t,_){var i=this,l=this.find("key",o);return l?(l.children||(l.children=[]),Object.assign(t,{parent:l}),Object.assign(t,{depth:l.depth+1}),t.children&&this.bfs(t,function(f){f!==t&&(i.nodes.push(f),Object.assign(f,{depth:f.parent.depth+1}))}),_!=null&&_.toString()?l.children.splice(_,0,t):l.children.push(t),this.nodes.push(t),this.root):!1}},{key:"removeByKey",value:function(o){var t,_=this.find("key",o);if(!_)return t;var i=_.parent;i.children.forEach(function(f,B){f.key===o&&(t=i.children.splice(B,1))});var l=[];return this.bfs(t[0],function(f){l.push(f.key)}),this.nodes=this.nodes.filter(function(f){return!l.includes(f.key)}),t}},{key:"move",value:function(o,t,_){var i=this.removeByKey(o);if(!i)return!1;var l=this.appendByKey(t,i[0],_);return!!l}},{key:"render",value:function(){for(var o=this,t=arguments.length,_=new Array(t),i=0;i<t;i++)_[i]=arguments[i];_.forEach(function(l){var f=l.order,B=l.renderFunction;f==="dfs"?o.dfs(o.root,B):o.bfs(o.root,B)})}},{key:"getChildrenData",value:function(o){var t=this,_=function i(l){var f={},B=l.data,K=l.children,X=l.collapse,Q=l.type,$=l.preserveData;if(Object.assign(f,B),Object.assign(f,$),Q==="RELATION"&&t.collapsible&&Object.assign(f,{collapse:X}),K){var z=[];K.forEach(function(ee){ee.type!=="BUTTON"&&z.push(i(ee))}),Object.assign(f,{children:z})}return f};return _(o)}},{key:"getPureData",value:function(){return this.getChildrenData(this.root)}},{key:"getMaxLeft",value:function(){for(var o=this.nodes,t=0,_=0;_<o.length;_++){var i,l=o[_];if(!t||((i=l.position)===null||i===void 0?void 0:i.x)>t){var f;t=(f=l.position)===null||f===void 0?void 0:f.x}}return t}}],[{key:"initWithData",value:function(o,t,_){var i=o;if(!i.hasOwnProperty("relation"))throw new Error('"relation" no exist in initial data.');var l=s().omit(i,["relation","children"]),f=new de({relation:i.relation},"RELATION",t,l),B=function K(X,Q){var $=Q.children;$==null||$.forEach(function(z){var ee=z.hasOwnProperty("relation"),q=null;if(ee){var ue=s().omit(z,["relation","children"]),be=s().pick(z,["relation"]);q=f.createNode(a()({},be),"RELATION",z.collapse,ue)}else{var _e=s().omit(z,_),Ze=s().pick(z,_);q=f.createNode(a()({},Ze),"FIELD",z.collapse,_e)}f.appendByKey(X,q),z.children&&K(q.key,z)})};return B(f.getRoot().key,i),s().cloneDeep(f)}}]),de}(),Ie="techui-rule-tree",er=function(n){var o=n.value,t=n.onChange,_=n.fields,i=n.relation,l=n.disabled,f=n.style,B=n.text,K=n.cascades,X=n.relationWidth,Q=X===void 0?120:X,$=n.defaultRelationValue,z=$===void 0?"and":$,ee=n.actionRef,q=n.onCascade,ue=n.extraDragItemRender,be=n.canAddRule,_e=n.canAddRuleGroup,Ze=n.onNodeFocus,Xe=n.copyable,$e=n.description,qe=n.defaultValue,mn=n.hideButton,hn=n.noDrag,tn=n.collapsible,en=tn===void 0?!1:tn,Re=n.relationRemovable,an=n.onFieldFocus,Te=n.mode,Ve=Te===void 0?"tree":Te,Ge=n.noDndProvider,ln=Ge===void 0?!1:Ge,Pe=n.modifyRow,ze=n.modifyTreeNode,on=n.actionsRender,Qe=n.onRemove,Oe=n.onFieldChange,Ue=n.shouldRemoveRelation,Le=Q+(Re&&!l?20:0)-(l?20:0),fn=(0,L.Z)(qe,{value:o,onChange:t}),Se=u()(fn,2),Ne=Se[0],re=Se[1],nn=_.map(function(ne){return ne.name}),H=(0,r.useRef)(Tn.initWithData(Ne,en,nn)),Dn=(0,r.useState)(0),gn=u()(Dn,2),An=gn[1],tr=function(){return An(function(S){return S+1})},ar=function(S){H.current=S,tr()},lr=(0,d.cI)(),or=u()(lr,1),sn=or[0],ke=function(){var S;return(S=H.current)===null||S===void 0?void 0:S.getPureData()},In=function(){return _.reduce(function(S,F){var Y=F.initialValue,G=F.name;return s().merge(S,E()({},G,Y))},{})},ir=function(S,F){var Y,G,N=In(),m=(Y=H.current)===null||Y===void 0?void 0:Y.createNode(F==="RELATION"?{relation:z}:N,F);if((G=H.current)===null||G===void 0||G.appendByKey(S,m),F===j){var U,J,w=(U=H.current)===null||U===void 0?void 0:U.createNode(N,"FIELD");(J=H.current)===null||J===void 0||J.appendByKey(m.key,w)}re==null||re(ke())},sr=function(S,F,Y){var G,N=(G=H.current)===null||G===void 0?void 0:G.find("key",F);if(N){var m,U,J=S||In(),w=(m=H.current)===null||m===void 0?void 0:m.createNode(J,"FIELD");(U=H.current)===null||U===void 0||U.appendByKey(F,w,Y),re==null||re(ke())}},dr=function(S){var F=Me(S);Object.keys(F).forEach(function(Y){var G=Y.split(".").filter(function(m){return m!=="children"});if(G.join("")){var N=G;G.length>2&&(N=[G.slice(0,-1).join(".")].concat(s().last(G))),sn.setFields([{name:N,value:F[Y]}])}})},ur=(0,r.useRef)({validate:function(){return sn.validateFields()},setData:function(S,F){var Y,G,N=(Y=H.current)===null||Y===void 0?void 0:Y.find("key",S);N&&(N.data=F,re==null||re((G=H.current)===null||G===void 0?void 0:G.getPureData()))},reRender:function(){An(function(S){return S+1})}});ee&&s().set(ee,"current",ur.current),(0,r.useEffect)(function(){Ne&&(ar(Tn.initWithData(Ne,en,nn)),new Promise(function(){dr(Ne)}))},[Ne]),(0,r.useEffect)(function(){sn.validateFields()},[]);var Pn=function ne(S){var F,Y,G,N=(F=H.current)===null||F===void 0?void 0:F.find("key",S);if(Qe){var m=Qe(N.type,N.namePath,N.data);if(!m)return}if(N.type==="FIELD"&&Ue!==null&&Ue!==void 0&&Ue(N)){ne(N.parent.key);return}var U=N.parent;(Y=H.current)===null||Y===void 0||Y.removeByKey(S),!((G=H.current)!==null&&G!==void 0&&G.isRoot(U))&&U.children.length===1&&U.children[0].type===T&&ne(U.key),re==null||re(ke())},_r=function(S){var F,Y=(F=H.current)===null||F===void 0?void 0:F.find("key",S);if(Y){var G,N,m=Y.data,U=Y.parent,J=(G=H.current)===null||G===void 0?void 0:G.createNode(s().clone(m),"FIELD");(N=H.current)===null||N===void 0||N.appendByKey(U.key,J),re==null||re(ke())}},bn=function(S,F,Y,G){var N,m,U=(N=H.current)===null||N===void 0?void 0:N.find("key",S),J=U.parent,w=(m=H.current)===null||m===void 0?void 0:m.find("key",F);if(w.namePath.length!==U.namePath.length-1){var le;(le=H.current)===null||le===void 0||le.move(S,F,G)}else{var ce;(ce=H.current)===null||ce===void 0||ce.move(S,F,Y)}J.type===j&&J.children.length===1&&J.children[0].type===T&&Pn(J.key),re==null||re(ke())},cr=function(S){H.current.toggleCollapse(S),re(ke())},vr=function(){var S,F=[],Y=[],G;return(S=H.current)===null||S===void 0||S.render({order:"bfs",renderFunction:function(m){var U,J=(U=m.children)===null||U===void 0?void 0:U.filter(function(I){return I.type===T})[0];if(J){var w;(w=H.current)===null||w===void 0||w.removeByKey(J.key)}if(!mn&&m.type===j){var le,ce,ve=(le=H.current)===null||le===void 0?void 0:le.createNode({},"BUTTON");(ce=H.current)===null||ce===void 0||ce.appendByKey(m.key,ve)}}},{order:"dfs",renderFunction:function(m){var U;if(m.children&&!m.collapse){var J=m.children.reduce(function(w,le){return w+le.height},0);Object.assign(m,{height:J})}else Object.assign(m,{height:me});(U=H.current)!==null&&U!==void 0&&U.isRoot(m)&&(G=m.height)}},{order:"bfs",renderFunction:function(m){m.parent?Object.assign(m,{namePath:m.parent.namePath.slice().concat(s().indexOf(m.parent.children,m).toString())}):Object.assign(m,{namePath:[]})}},{order:"bfs",renderFunction:function(m){var U;if((U=H.current)!==null&&U!==void 0&&U.isRoot(m)&&Object.assign(m,{position:{x:Ve==="tree"?0:0-Le,y:(G-R)/2+20}}),m.type===j){var J=m.children;if(!J)return;var w=J.reduce(function(le,ce){return le+ce.height},0);J.forEach(function(le,ce){var ve;if(ce>0){var I=J[ce-1];ve=I.position.y+I.height/2+le.height/2}else ve=m.position.y-(w-me)/2+(le.height-me)/2;Object.assign(le,{position:{x:m.position.x+Le+fe,y:ve}})})}}},{order:"bfs",renderFunction:function(m){var U;if((U=H.current)!==null&&U!==void 0&&U.isRoot(m)){var J=m.children;if((J==null?void 0:J.length)>1){var w=s().first(J),le=s().last(J);Object.assign(m,{position:{x:0,y:(w.position.y+le.position.y)/2}})}}}},{order:"bfs",renderFunction:function(m){var U,J={copyable:Xe,draggable:!(hn||l),removable:!l,className:""},w=m.children,le=m.key;if((U=H.current)!==null&&U!==void 0&&U.isRoot(m)){var ce=(0,D.cloneDeep)(J);Ve==="tree"&&ze&&(ce=a()(a()({},ce),ze({type:m.type,namePath:m.namePath,data:m.data,isRoot:!0}))),F.push((0,v.jsx)(Xn,{rowConfig:ce,hide:Ve==="list",node:m,prefixCls:Ie,relationWidth:Le,relation:i,disabled:l,getChildrenData:function(){return H.current.getPureData()},className:"".concat(Ie,"-").concat(m.type.toLowerCase())},m.key))}var ve=H.current.shouldCollapse(le);w&&w.forEach(function(I,Ee){var we=I.position,Ae=I.type,dn=I.collapse,En=we.x,un=we.y;if(Ae===T){var Un={depth:I.depth,parent:I.parent.data,brothers:I.parent.children.filter(function(He){return He.type!==T}).map(function(He){return a()({},He.data)})},Ln=_e?_e(s().cloneDeep(Un)):!0,Bn=be?be(s().cloneDeep(Un)):!0,mr=l||!Ln,hr=l||!Bn;F.push((0,v.jsx)(Ye,{hide:ve,hideAddButton:Bn==="hide",hideAddGroupButton:Ln==="hide"||Ve==="list",canAddRuleDisabled:hr,canAddRuleGroupDisabled:mr,position:I.position,text:B,parentKey:m.key,prefixCls:Ie,handleAdd:ir},I.key))}else{var On,jn;F.push((0,v.jsx)(xn,{hide:ve,x:En,y:Ee?w[Ee-1].position.y+(un-w[Ee-1].position.y)/2+je/2:un-je,children:(0,v.jsx)(Cn,{order:Ee,parentKey:m.key,namePath:I.namePath,relatedKeys:Ee>0?[I.key,(On=m.parent)===null||On===void 0?void 0:On.key,w[Ee-1].key]:[I.key,(jn=m.parent)===null||jn===void 0?void 0:jn.key]})},"p".concat(I.key)));var rn=a()(a()({},(0,D.cloneDeep)(J)),{removable:Ae==="FIELD"?!0:Re});if(Ve==="list"&&Pe&&I.type==="FIELD"&&(rn=a()(a()({},rn),Pe({index:Ee,length:w.filter(function(He){return He.type!=="BUTTON"}).length,data:I.data}))),Ve==="tree"&&ze&&(rn=a()(a()({},rn),ze({type:I.type,namePath:I.namePath,data:I.data,isRoot:!1}))),Ae===j&&en&&F.push((0,v.jsx)(Je,{collapse:dn,child:I,toggleCollapse:cr,relationWidth:Le,hide:ve},I.key+"-collapse")),F.push((0,v.jsx)("span",{"data-height":I.height,style:a()(a()(a()({},te(I.position.x,I.position.y)),{width:Ae===C?"auto":Le,height:k[Ae],lineHeight:"".concat(k[Ae],"px")}),{},{display:ve?"none":void 0}),className:"".concat(Ie,"-node-drag-container"),tabIndex:I.key,children:(0,v.jsx)("div",{className:"".concat(Ie,"-node-container ").concat(Ie,"-").concat(Ae.toLowerCase()),children:Ae===j?(0,v.jsx)(Jn,{child:I,relation:i,disabled:l,onMove:bn,thisKey:I.key,namePath:I.namePath,rowConfig:rn,onRemoveRelation:Pn,relationRemovable:Re,getChildrenData:function(Er){return H.current.getChildrenData(Er)},currentIndex:Ee,actionsRender:on},"r-".concat(I.namePath.join(","))):(0,v.jsx)(Hn,{fields:_,onCascade:q,cascades:K,copyable:Xe,child:I,form:sn,disabled:l,handleCopy:_r,handleRemove:Pn,onMove:bn,thisKey:I.key,namePath:I.namePath,rowConfig:rn,onNodeFocus:Ze,onFieldFocus:an,currentIndex:Ee,length:w.filter(function(He){return He.type!=="BUTTON"}).length,actionsRender:on,onFieldChange:Oe},"f-".concat(I.namePath.join(",")))})},I.key.toString())),Ee===w.length-2){var yn;F.push((0,v.jsx)(xn,{x:En,y:un+R+Be/2-je/2,hide:ve,children:(0,v.jsx)(Cn,{order:Ee+1,parentKey:m.key,relatedKeys:[I.key,(yn=m.parent)===null||yn===void 0?void 0:yn.key],namePath:I.namePath})},"ep".concat(I.key)))}}})}},{order:"bfs",renderFunction:function(m){if(Ve==="tree"){if(m.type===j){var U=m.children,J=m.key,w=m.position,le=w.x,ce=w.y;U!=null&&U.length&&!H.current.shouldCollapse(J)&&U.forEach(function(I){var Ee=I.position,we=Ee.x,Ae=Ee.y,dn=I.type;Y.push((0,v.jsx)($n,{fromX:le+Le,fromY:ce+k[j]/2,toX:we,toY:Ae+k[dn]/2},"svg-".concat(m.key,"-").concat(I.key)))})}}else if(m.type===j){var ve=m.children;ve!=null&&ve.length&&ve.forEach(function(I,Ee){if(Ee!==ve.length-1){var we=I.position,Ae=we.x,dn=we.y,En=I.type,un=ve[Ee+1].position.y;Y.push((0,v.jsx)(zn,{x:Ae,fromY:dn+k[j]/2,toY:un+k[En]/2},"svg-".concat(m.key,"-").concat(I.key)))}})}}}),F.push((0,v.jsx)("svg",{style:{pointerEvents:"none",position:"absolute",left:0,top:0},width:H.current.getMaxLeft()+20,height:G,children:Y},"svg")),(0,v.jsx)("div",{style:{height:G,width:"100%",paddingTop:20,boxSizing:"content-box",position:"relative"},children:F})};return(0,v.jsx)("div",{style:f,className:"".concat(Ie,"-container"),children:(0,v.jsx)(Vn,{noDndProvider:ln,children:(0,v.jsxs)(d.ZP,{component:"div",form:sn,onValuesChange:s().debounce(function(ne,S){var F=(0,D.cloneDeep)(ke());Object.keys(ne).forEach(function(Y){var G=ne[Y],N=Y==="relation"?Y:Y.split(".").reduce(function(U,J){return[].concat(O()(U),["children",J])},[]).join("."),m=Y==="relation"?G:a()(a()({},s().get(F,N)),G);s().set(F,N,m)}),re==null||re(F)},100),children:[(0,v.jsxs)("div",{style:{display:"flex",flexGrow:0,flexShrink:0,position:"relative",flexDirection:"column"},children:[$e&&(0,v.jsx)("div",{className:"".concat(Ie,"-desc"),children:$e}),vr()]}),ue&&ue(function(ne){var S=ne.data,F=ne.onDragEnd,Y=ne.render;return(0,v.jsx)(Wn,{data:S,disabled:l,onDrop:function(N,m,U){F&&F(N),sr(N,m,U)},children:Y(S)},JSON.stringify(S))})]})},"rule-tree-provider")})},nr=er,rr=nr},2903:function(){}}]);
