"use strict";(self.webpackChunkreact_rule_tree=self.webpackChunkreact_rule_tree||[]).push([[712],{35973:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(16855),d=e(46451),_=e(55241),h=e(96365),T=e(86738),o=e(71577),P=e(34041),u=e(67294),s=e(43306),Z=e(2903),r=e(85893),E=d.Z.useForm,y=function(A){return(0,r.jsx)(_.Z,{title:(0,r.jsx)(h.Z,{value:A.value,onChange:function(N){A.onChange(N.target.value)}}),children:A.value})};O.default=function(){var x=E(),A=j()(x,1),g=A[0],N=(0,u.useRef)(),p=(0,u.useState)({relation:"and",children:[{name:"1"},{name:"2"},{relation:"and",children:[{name:"foo"},{name:"bar"}]}]}),M=j()(p,2),f=M[0],C=M[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(d.Z,{form:g,onValuesChange:function(H,se){console.log(se),C(se.rule)},children:(0,r.jsx)(d.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:f,required:!0,children:(0,r.jsx)(s.ZP,{actionRef:N,fields:[{name:"name",rules:[{required:!0}],initialValue:"1",render:function(H,se,Q){return(0,r.jsx)(y,{},"test-".concat(Q.index))}}],actionsRender:function(H,se){return H.type==="FIELD"?{remove:(0,r.jsx)(T.Z,{title:"\u4E11\u5417\uFF1F\u4E11\u5C31\u5BF9\u4E86",onConfirm:function(){se.remove()},children:(0,r.jsx)(o.ZP,{style:{backgroundColor:"#"+(Math.random()*16777215<<0).toString(16)},disabled:H.disabled,children:"remove"})})}:{}},relationWidth:130,relation:function(){return(0,r.jsxs)(P.Z,{style:{width:72},children:[(0,r.jsx)(P.Z.Option,{value:"and",children:"AND"}),(0,r.jsx)(P.Z.Option,{value:"or",children:"OR"})]})}})})})}),(0,r.jsx)(R.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(f),valueType:"jsonCode"})]})}},52662:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(46451),d=e(96365),_=e(34041),h=e(67294),T=e(43306),o=e(85893),P=R.Z.useForm;O.default=function(){var u=P(),s=j()(u,1),Z=s[0];return(0,o.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,o.jsx)(R.Z,{form:Z,onValuesChange:function(E,y){console.log(y)},children:(0,o.jsx)(R.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"},{relation:"and",children:[{name:"lululu",sex:"1"}]}]},required:!0,children:(0,o.jsx)(T.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,o.jsx)(d.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"0",children:"\u7537"}),(0,o.jsx)(_.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"and",children:"and"}),(0,o.jsx)(_.Z.Option,{value:"or",children:"or"})]}),canAddRule:function(E){return E.depth!==2}})})})})}},16141:function(ie,O,e){e.r(O);var b=e(97857),j=e.n(b),R=e(5574),d=e.n(R),_=e(16855),h=e(46451),T=e(96365),o=e(34041),P=e(67294),u=e(43306),s=e(85893),Z=h.Z.useForm;O.default=function(){var r=Z(),E=d()(r,1),y=E[0],x=(0,P.useState)({relation:"or",collapse:!1,children:[{relation:"and",collapse:!1,children:[{name:"\u70B9\u4E0B\u4E00\u4E2A\u5173\u7CFB\u8282\u70B9\u7684+\u8BD5\u8BD5"}]},{relation:"and",collapse:!0,children:[{name:""},{relation:"and",collapse:!1,children:[{name:""},{relation:"and",collapse:!0,children:[{name:""},{relation:"and",collapse:!1,children:[{name:""}]},{relation:"and",collapse:!1,children:[{name:""}]}]},{relation:"and",collapse:!1,children:[{name:""},{relation:"and",collapse:!1,children:[{name:""}]}]}]}]}]}),A=d()(x,2),g=A[0],N=A[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,s.jsx)(h.Z,{form:y,onValuesChange:function(M,f){console.log(f),N(f)},children:(0,s.jsx)(h.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:g,required:!0,children:(0,s.jsx)(u.ZP,{collapsible:!0,fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(M){var f=M.getFieldError().length&&{borderColor:"red"};return(0,s.jsx)(T.Z,{style:j()({height:32},f)})}}],relation:(0,s.jsxs)(o.Z,{style:{width:80},children:[(0,s.jsx)(o.Z.Option,{value:"and",children:"and"}),(0,s.jsx)(o.Z.Option,{value:"or",children:"or"})]})})})})}),(0,s.jsx)(_.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(g),valueType:"jsonCode"})]})}},10187:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(46451),d=e(96365),_=e(34041),h=e(67294),T=e(43306),o=e(85893),P=R.Z.useForm;O.default=function(){var u=P(),s=j()(u,1),Z=s[0];return(0,o.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,o.jsxs)(R.Z,{form:Z,onValuesChange:function(E,y){console.log(y)},children:[(0,o.jsx)(R.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"1"}]},required:!0,children:(0,o.jsx)(T.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,o.jsx)(d.Z,{style:{height:32}})}},{name:"hide",render:function(){return!1}},{name:"sex",initialValue:"0",render:function(E){var y=E.getFieldValue("name");return y==="love"?(0,o.jsx)("div",{children:"is just a lie."}):(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"0",children:"\u7537"}),(0,o.jsx)(_.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"and",children:"and"}),(0,o.jsx)(_.Z.Option,{value:"or",children:"or"})]})})}),'\u5C1D\u8BD5\u8F93\u5165 "love"']})})}},17109:function(ie,O,e){e.r(O);var b=e(97857),j=e.n(b),R=e(5574),d=e.n(R),_=e(52074),h=e(16855),T=e(46451),o=e(84567),P=e(96365),u=e(34041),s=e(67294),Z=e(43306),r=e(85893),E=T.Z.useForm,y=function(A){var g=A.value,N=A.onChange;return(0,r.jsx)(o.Z,{checked:g,onChange:function(M){N(M.target.checked)},children:g?"\u5F00\u542F":"\u5173\u95ED"})};O.default=function(){var x=E(),A=d()(x,1),g=A[0],N=(0,s.useState)({relation:"or",children:[{name:"123",sex:"1"}]}),p=d()(N,2),M=p[0],f=p[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(T.Z,{form:g,onValuesChange:function(L,H){console.log(H),f(H)},children:(0,r.jsx)(T.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:M,required:!0,children:(0,r.jsx)(Z.ZP,{copyable:!0,fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(L){var H=L.getFieldError().length&&{borderColor:"red"};return(0,r.jsx)(P.Z,{style:j()({height:32},H)})}},{name:"check",render:function(){return(0,r.jsx)(y,{})}},{name:"sex",initialValue:"0",render:function(){return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(u.Z.Option,{value:"0",children:"\u7537"}),(0,r.jsx)(u.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,r.jsxs)(u.Z,{style:{width:80},children:[(0,r.jsx)(u.Z.Option,{value:"and",children:"and"}),(0,r.jsx)(u.Z.Option,{value:"or",children:"or"})]}),relationWidth:120})})})}),(0,r.jsx)(_.ZP,{children:(0,r.jsx)(h.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(M),valueType:"jsonCode"})})]})}},65452:function(ie,O,e){e.r(O);var b=e(97857),j=e.n(b),R=e(5574),d=e.n(R),_=e(46451),h=e(96365),T=e(34041),o=e(67294),P=e(43306),u=e(85893),s=_.Z.useForm;O.default=function(){var Z=s(),r=d()(Z,1),E=r[0],y=(0,o.useState)({relation:"or",children:[{name:"123",sex:"1"}]}),x=d()(y,2),A=x[0],g=x[1],N=(0,o.useRef)();return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,u.jsx)(_.Z,{form:E,onFinish:function(){var M;(M=N.current)===null||M===void 0||M.validate()},onValuesChange:function(M,f){console.log(f),g(f)},children:(0,u.jsx)(_.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:A,required:!0,children:(0,u.jsx)(P.ZP,{actionRef:N,description:(0,u.jsx)("div",{style:{lineHeight:"32px"},children:"\u8FD9\u662F\u4E00\u4E2A\u989D\u5916\u7684 32px \u9AD8\u7684\u533A\u57DF"}),fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(M){var f=M.getFieldError().length&&{borderColor:"red"};return(0,u.jsx)(h.Z,{style:j()({height:32},f)})}},{name:"sex",initialValue:"0",render:function(){return(0,u.jsxs)(T.Z,{children:[(0,u.jsx)(T.Z.Option,{value:"0",children:"\u7537"}),(0,u.jsx)(T.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,u.jsxs)(T.Z,{style:{width:80},children:[(0,u.jsx)(T.Z.Option,{value:"and",children:"and"}),(0,u.jsx)(T.Z.Option,{value:"or",children:"or"})]}),relationWidth:120})})})})})}},44723:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(46451),d=e(96365),_=e(34041),h=e(72269),T=e(67294),o=e(43306),P=e(85893),u=R.Z.useForm;O.default=function(){var s=u(),Z=j()(s,1),r=Z[0],E=(0,T.useState)(!0),y=j()(E,2),x=y[0],A=y[1];return(0,P.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,P.jsxs)(R.Z,{form:r,onValuesChange:function(N,p){console.log(p)},children:[(0,P.jsx)(R.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"},{relation:"and",children:[{name:"lululu",sex:"1"}]}]},required:!0,children:(0,P.jsx)(o.ZP,{hideButton:x,canAddRule:function(){return"hide"},canAddRuleGroup:function(){return!1},disabled:x,fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,P.jsx)(d.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,P.jsxs)(_.Z,{disabled:!0,children:[(0,P.jsx)(_.Z.Option,{value:"0",children:"\u7537"}),(0,P.jsx)(_.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:function(){return(0,P.jsxs)(_.Z,{disabled:!0,children:[(0,P.jsx)(_.Z.Option,{value:"and",children:"and"}),(0,P.jsx)(_.Z.Option,{value:"or",children:"or"})]})}})}),"disabled \u5F00\u5173\uFF1A",(0,P.jsx)(h.Z,{defaultChecked:!0,onChange:function(){A(!x)}})]})})}},24493:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(46451),d=e(96365),_=e(34041),h=e(42075),T=e(71577),o=e(67294),P=e(43306),u=e(85893),s=R.Z.useForm;O.default=function(){var Z=s(),r=j()(Z,1),E=r[0],y=[{name:"fooooo",sex:"0"},{name:"bar",sex:"1"}];return(0,u.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,u.jsxs)(R.Z,{form:E,onFinish:function(){},onValuesChange:function(A,g){console.log(g)},children:[(0,u.jsx)(R.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"1"}]},required:!0,children:(0,u.jsx)(P.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,u.jsx)(d.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(A){var g=A.getFieldValue("name");return g==="1024"?(0,u.jsx)("div",{children:"ho!!"}):(0,u.jsxs)(_.Z,{children:[(0,u.jsx)(_.Z.Option,{value:"0",children:"\u7537"}),(0,u.jsx)(_.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,u.jsxs)(_.Z,{children:[(0,u.jsx)(_.Z.Option,{value:"and",children:"and"}),(0,u.jsx)(_.Z.Option,{value:"or",children:"or"})]}),text:{addRule:"Add Rule",addRelation:"Add Relation"},cascades:["name"],onCascade:function(A){console.log("onCascade"),A.setFieldValue("sex","1")},extraDragItemRender:function(A){return(0,u.jsx)("div",{children:(0,u.jsx)(h.Z,{direction:"vertical",children:y.map(function(g){return(0,u.jsxs)(h.Z,{children:["\u5916\u90E8\u6570\u636E:",A({data:g,onDragEnd:function(){console.log("end")},render:function(p){return(0,u.jsx)(T.ZP,{children:JSON.stringify(p)})}})]},JSON.stringify(g))})})})}})}),(0,u.jsx)(T.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})})}},60401:function(ie,O,e){e.r(O);var b=e(15009),j=e.n(b),R=e(99289),d=e.n(R),_=e(5574),h=e.n(_),T=e(97857),o=e.n(T),P=e(46451),u=e(83062),s=e(96365),Z=e(34041),r=e(71577),E=e(67294),y=e(43306),x=e(85893),A=P.Z.useForm,g=function(p){var M=p.title,f=p.visible,C=p.value,L=p.onChange,H=p.errorStyle;return(0,x.jsx)(u.Z,{color:"red",title:M,visible:f,children:(0,x.jsx)(s.Z,{value:C,onChange:L,style:o()({height:32},H)})})};O.default=function(){var N=A(),p=h()(N,1),M=p[0],f=(0,E.useRef)();return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,x.jsxs)(P.Z,{form:M,onFinish:d()(j()().mark(function C(){var L,H;return j()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.prev=0,Q.next=3,(L=f.current)===null||L===void 0?void 0:L.validate();case 3:Q.next=9;break;case 5:Q.prev=5,Q.t0=Q.catch(0),console.log(Q.t0),(H=f.current)===null||H===void 0||H.reRender();case 9:case"end":return Q.stop()}},C,null,[[0,5]])})),onValuesChange:function(L,H){console.log("onValuesChange",H)},children:[(0,x.jsx)(P.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"and",children:[{name:"\u5220\u6389\u6211",sex:""}]},required:!0,children:(0,x.jsx)(y.ZP,{actionRef:f,fields:[{name:"name",rules:[{required:!0,message:"\u5FC5\u586B\u9879\uFF01"}],initialValue:"",render:function(L){var H=L.getFieldError().length?{borderColor:"red",outline:"none"}:{};return(0,x.jsx)(g,{errorStyle:H,title:L.getFieldError()[0],visible:!!L.getFieldError().length})}},{name:"sex",initialValue:"0",render:function(L){var H=L.getFieldValue("name");return H==="1024"?(0,x.jsx)("div",{children:"ho!!"}):(0,x.jsxs)(Z.Z,{children:[(0,x.jsx)(Z.Z.Option,{value:"0",children:"\u7537"}),(0,x.jsx)(Z.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,x.jsxs)(Z.Z,{style:{width:60},children:[(0,x.jsx)(Z.Z.Option,{value:"and",children:"and"}),(0,x.jsx)(Z.Z.Option,{value:"or",children:"or"})]})})}),(0,x.jsx)(r.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})})})}},85682:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(46451),d=e(96365),_=e(34041),h=e(67294),T=e(43306),o=e(85893),P=R.Z.useForm;O.default=function(){var u=P(),s=j()(u,1),Z=s[0];return(0,o.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,o.jsx)(R.Z,{form:Z,onValuesChange:function(E,y){console.log(y)},children:(0,o.jsx)(R.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"},{relation:"and",children:[{name:"lululu",sex:"1"}]}]},required:!0,children:(0,o.jsx)(T.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,o.jsx)(d.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"0",children:"\u7537"}),(0,o.jsx)(_.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:function(E){var y=!E.parent;return y?(0,o.jsx)("div",{children:"\u6839\u8282\u70B9"}):(0,o.jsxs)("select",{children:[(0,o.jsx)("option",{value:"and",children:"and"}),(0,o.jsx)("option",{value:"or",children:"or"})]})},canAddRule:function(E){return E.depth!==2}})})})})}},37799:function(ie,O,e){e.r(O);var b=e(96365),j=e(34041),R=e(67294),d=e(43306),_=e(85893);O.default=function(){return(0,_.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,_.jsx)(d.ZP,{noDrag:!0,defaultValue:{relation:"and",children:[{name:"\u4E0D\u70AB\u9177\u4E86"},{name:"\u6CA1\u7075\u9B42\u4E86"}]},onChange:function(T){console.log(T)},fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,_.jsx)(b.Z,{style:{height:32}})}}],relation:(0,_.jsxs)(j.Z,{children:[(0,_.jsx)(j.Z.Option,{value:"and",children:"and"}),(0,_.jsx)(j.Z.Option,{value:"or",children:"or"})]})})})}},48014:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(52074),d=e(16855),_=e(46451),h=e(34041),T=e(42075),o=e(71577),P=e(67294),u=e(43306),s=e(85893),Z=_.Z.useForm;O.default=function(){var r=Z(),E=j()(r,1),y=E[0],x=(0,P.useState)({relation:"or",children:[{name:"1"}]}),A=j()(x,2),g=A[0],N=A[1],p=(0,P.useRef)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,s.jsxs)(_.Z,{form:y,onFinish:function(){var f;(f=p.current)===null||f===void 0||f.validate()},onValuesChange:function(f,C){console.log(C),N(C)},children:[(0,s.jsx)(_.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:g,required:!0,children:(0,s.jsx)(u.ZP,{actionRef:p,onFieldChange:function(){for(var f=arguments.length,C=new Array(f),L=0;L<f;L++)C[L]=arguments[L];console.log({args:C})},fields:[{name:"name",rules:[{required:!0}],initialValue:"1",render:function(){return(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(h.Z.Option,{value:"1",children:"1111111"}),(0,s.jsx)(h.Z.Option,{value:"2",children:"2222222"})]})}}],relation:(0,s.jsxs)(h.Z,{style:{width:80},children:[(0,s.jsx)(h.Z.Option,{value:"and",children:"and"}),(0,s.jsx)(h.Z.Option,{value:"or",children:"or"})]}),relationWidth:120,text:{addRule:"Add Rule",addRelation:"Add Relation"},cascades:["name"],onCascade:function(f){console.log("onCascade"),f.setFieldValue("sex","1")},shouldRemoveRelation:function(f){return console.log(f),f.data.name==="2"}})}),(0,s.jsx)(T.Z,{children:(0,s.jsx)(o.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})})]})}),(0,s.jsx)(R.ZP,{children:(0,s.jsx)(d.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(g),valueType:"jsonCode"})})]})}},87898:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(97857),d=e.n(R),_=e(16855),h=e(46451),T=e(83062),o=e(96365),P=e(34041),u=e(71577),s=e(5914),Z=e(67294),r=e(43306),E=e(85893),y=h.Z.useForm,x=function(g){var N=g.value,p=g.onChange,M=g.ctx,f=g.errorStyle;return(0,E.jsx)(T.Z,{color:"red",title:M.getFieldError()[0],visible:!!M.getFieldError().length,children:(0,E.jsx)(o.Z,{value:N,onChange:p,style:d()({height:32},f)})})};O.default=function(){var A=y(),g=j()(A,1),N=g[0],p=(0,Z.useRef)(),M=(0,Z.useState)(null),f=j()(M,2),C=f[0],L=f[1],H=(0,Z.useState)(),se=j()(H,2),Q=se[0],Ue=se[1],Le=y(),Te=j()(Le,1),ue=Te[0],ae=(0,Z.useState)(!1),fe=j()(ae,2),Ae=fe[0],De=fe[1];return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:[(0,E.jsxs)(h.Z,{form:N,onValuesChange:function(te,_e){console.log("onValuesChange",_e)},children:[(0,E.jsx)(h.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"and"},required:!0,children:(0,E.jsx)(r.ZP,{actionRef:p,onFieldFocus:function(te,_e,Pe,Ee){L(te),Ue(Ee),De(!0)},fields:[{name:"name",rules:[{required:!0,message:"\u5FC5\u586B\u9879\uFF01"}],initialValue:"",render:function(te){var _e=te.getFieldError().length?{borderColor:"red",outline:"none"}:{};return(0,E.jsx)(x,{errorStyle:_e,ctx:te})}},{name:"sex",initialValue:"0",render:function(te){var _e=te.getFieldValue("name");return _e==="1024"?(0,E.jsx)("div",{children:"ho!!"}):(0,E.jsxs)(P.Z,{children:[(0,E.jsx)(P.Z.Option,{value:"0",children:"\u7537"}),(0,E.jsx)(P.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,E.jsxs)(P.Z,{style:{width:60},children:[(0,E.jsx)(P.Z.Option,{value:"and",children:"and"}),(0,E.jsx)(P.Z.Option,{value:"or",children:"or"})]})})}),(0,E.jsx)(u.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]}),(0,E.jsxs)(s.Z,{visible:Ae,onOk:function(){ue.validateFields().then(function(te){var _e;(_e=p.current)===null||_e===void 0||_e.setData(C,te),De(!1)})},onCancel:function(){De(!1)},title:"\u590D\u6742\u7684\u7F16\u8F91\u6D41\u7A0B",children:["\u5173\u6CE8\u7684\u8282\u70B9\uFF1A",(0,E.jsx)(_.ZP,{mode:"read",valueType:"jsonCode",value:JSON.stringify(Q)}),"key\u4E3A\uFF1A",C,(0,E.jsxs)(h.Z,{form:ue,children:[(0,E.jsx)(h.Z.Item,{name:"name",label:"\u5916\u90E8\u7F16\u8F91name",children:(0,E.jsx)(o.Z,{})}),(0,E.jsx)(h.Z.Item,{name:"sex",label:"\u5916\u90E8\u7F16\u8F91label",children:(0,E.jsxs)(P.Z,{children:[(0,E.jsx)(P.Z.Option,{value:"0",children:"\u7537"}),(0,E.jsx)(P.Z.Option,{value:"1",children:"\u5973"})]})})]})]})]})})}},53906:function(ie,O,e){e.r(O),e.d(O,{default:function(){return Le},initRuleData:function(){return H}});var b=e(15009),j=e.n(b),R=e(99289),d=e.n(R),_=e(5574),h=e.n(_),T=e(97857),o=e.n(T),P=e(19632),u=e.n(P),s=e(47389),Z=e(82061),r=e(46451),E=e(42075),y=e(71577),x=e(85265),A=e(96365),g=e(86738),N=e(96486),p=e.n(N),M=e(67294),f=e(43306),C=e(85893),L=[{value:"name",label:"\u540D\u79F0"},{value:"section",label:"\u79D1"},{value:"family",label:"\u5C5E"}],H=[{name:"\u8C79",section:"\u8C79\u4E9A\u79D1",family:"\u5927\u578B\u732B\u79D1",children:[{name:"\u96EA\u8C79",section:"\u8C79\u79D1",family:"\u8C79\u5C5E"}]},{name:"\u732B",section:"\u732B\u4E9A\u79D1",family:"\u5C0F\u578B\u732B\u79D1"}],se=function Te(ue){return ue==null?void 0:ue.map(function(ae){var fe=ae.name,Ae=ae.section,De=ae.family,le=ae.children,te={};return le&&le.length&&(te.children=Te(u()(le)),te.relation={name:fe,section:Ae,family:De}),o()({node:{name:fe,section:Ae,family:De}},te)})},Q=function(ue){var ae=ue.value,fe=ue.onChange,Ae=r.Z.useForm(),De=h()(Ae,1),le=De[0],te=(0,M.useState)(!1),_e=h()(te,2),Pe=_e[0],Ee=_e[1],Oe=ae||{},Ce=Oe.name,We=Ce===void 0?"\u540D\u79F0":Ce,v=Oe.section,He=v===void 0?"\u79D1":v,Ke=Oe.family,_n=Ke===void 0?"\u5C5E":Ke,Ye=function(){le.validateFields().then(function(vn){fe(vn),le.resetFields(),Ee(!1)})},cn=(0,C.jsxs)(E.Z,{children:[(0,C.jsx)(y.ZP,{onClick:function(){le.resetFields(),Ee(!1)},children:"\u53D6\u6D88"}),(0,C.jsx)(y.ZP,{type:"primary",onClick:Ye,children:"\u786E\u5B9A"})]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(E.Z,{align:"baseline",style:{whiteSpace:"nowrap"},children:[We,"\u3001",He,"\u3001",_n,(0,C.jsx)(s.Z,{onClick:function(){le.setFieldsValue(ae),Ee(!0)}})]}),Pe?(0,C.jsx)(x.Z,{open:Pe,destroyOnClose:!0,width:"600px",onClose:function(){le.resetFields(),Ee(!1)},extra:cn,title:"\u7F16\u8F91",children:(0,C.jsx)(r.Z,{form:le,labelCol:{span:4},children:L.map(function(xe){return(0,C.jsx)(r.Z.Item,{name:xe.value,label:xe.label,rules:[{required:!0}],children:(0,C.jsx)(A.Z,{})},xe.value)})})}):null]})},Ue=function(ue){var ae=ue.value,fe=ue.onChange;return(0,C.jsx)("div",{className:"relation-node",style:{whiteSpace:"nowrap"},children:ae!=null&&ae.isRoot?(0,C.jsx)("span",{children:ae==null?void 0:ae.name}):(0,C.jsx)(Q,{value:ae,onChange:fe,editNodeFields:L})})};function Le(){var Te=(0,M.useRef)(),ue={relation:{name:"\u732B\u79D1\u7269\u79CD",isRoot:!0},children:se(H)},ae=(0,M.useState)(ue),fe=h()(ae,2),Ae=fe[0],De=fe[1],le=function Pe(Ee,Oe){var Ce=p().cloneDeep(Ee);if(Oe&&Oe.length===1)return p().remove(Ce,function(He,Ke){return Number(Oe[0])!==Ke});var We=Oe.shift(),v=Ce[We].children;return Ce[We].children=Pe(v,Oe),Ce},te=function(){var Pe=d()(j()().mark(function Ee(Oe){var Ce,We,v,He,Ke;return j()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:Ce=Ae||{},We=Ce.children,v=We===void 0?[]:We,He=Oe.namePath,Ke=le(v,He),De(o()(o()({},ue),{},{children:Ke}));case 4:case"end":return Ye.stop()}},Ee)}));return function(Oe){return Pe.apply(this,arguments)}}(),_e=function(Ee){return{remove:(0,C.jsx)(E.Z,{size:6,children:(0,C.jsx)(g.Z,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u6761\u6570\u636E\u4EE5\u53CA\u5B50\u6570\u636E",onConfirm:function(){te(Ee)},children:(0,C.jsx)(Z.Z,{})})})}};return(0,C.jsx)(f.ZP,{actionRef:Te,value:Ae,style:{marginLeft:"-160px",overflowY:"auto"},fields:[{name:"node",render:function(){return(0,C.jsx)(Q,{editNodeFields:L})}}],onChange:function(Ee){return De(Ee)},relation:function(){return(0,C.jsx)(Ue,{})},actionsRender:_e,id:"rule",relationWidth:260,modifyTreeNode:function(){return{removable:!0}},text:{addRule:"\u6DFB\u52A0\u4E00\u5217\u6570\u636E",addRelation:"\u6DFB\u52A0\u4E00\u7EC4\u6570\u636E"}})}},2708:function(ie,O,e){e.r(O);var b=e(97857),j=e.n(b),R=e(5574),d=e.n(R),_=e(16855),h=e(46451),T=e(96365),o=e(34041),P=e(67294),u=e(43306),s=e(85893),Z=h.Z.useForm;O.default=function(){var r=Z(),E=d()(r,1),y=E[0],x=(0,P.useState)({relation:"or",children:[{relation:"and"},{relation:"and"},{relation:"and"}]}),A=d()(x,2),g=A[0],N=A[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,s.jsx)(h.Z,{form:y,onValuesChange:function(M,f){console.log(f),N(f)},children:(0,s.jsx)(h.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:g,required:!0,children:(0,s.jsx)(u.ZP,{fields:[{name:"name",rules:[{required:!0}],initialValue:"",render:function(M){var f=M.getFieldError().length&&{borderColor:"red"};return(0,s.jsx)(T.Z,{style:j()({height:32},f)})}}],modifyTreeNode:function(){return{removable:!0}},relationWidth:144,relation:(0,s.jsxs)(o.Z,{style:{width:84},children:[(0,s.jsx)(o.Z.Option,{value:"and",children:"and"}),(0,s.jsx)(o.Z.Option,{value:"or",children:"or"})]})})})})}),(0,s.jsx)(_.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(g),valueType:"jsonCode"})]})}},22129:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(16855),d=e(46451),_=e(55241),h=e(96365),T=e(34041),o=e(67294),P=e(43306),u=e(2903),s=e(85893),Z=d.Z.useForm,r=function(y){return(0,s.jsx)(_.Z,{title:(0,s.jsx)(h.Z,{value:y.value,onChange:function(A){y.onChange(A.target.value)}}),children:y.value})};O.default=function(){var E=Z(),y=j()(E,1),x=y[0],A=(0,o.useState)({relation:"and",children:[{name:"1"},{relation:"and",children:[{name:"2"}]}]}),g=j()(A,2),N=g[0],p=g[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,s.jsx)(d.Z,{form:x,onValuesChange:function(f,C){console.log(C),p(C.rule)},children:(0,s.jsx)(d.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:N,required:!0,children:(0,s.jsx)(P.ZP,{fields:[{name:"name",rules:[{required:!0}],initialValue:"1",render:function(f,C,L){return(0,s.jsx)(r,{},"test-".concat(L.index))}}],modifyTreeNode:function(f){var C=f.type;return{className:C==="FIELD"?"black":"",removable:C==="RELATION"}},relationWidth:132,relation:function(){return(0,s.jsxs)(T.Z,{style:{width:72},children:[(0,s.jsx)(T.Z.Option,{value:"and",children:"AND"}),(0,s.jsx)(T.Z.Option,{value:"or",children:"OR"})]})}})})})}),(0,s.jsx)(R.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(N),valueType:"jsonCode"})]})}},25269:function(ie,O,e){e.r(O);var b=e(97857),j=e.n(b),R=e(5574),d=e.n(R),_=e(16855),h=e(46451),T=e(96365),o=e(34041),P=e(71577),u=e(67294),s=e(43306),Z=e(2903),r=e(85893),E=h.Z.List,y=h.Z.useForm,x=function(g){return _jsx(Popover,{title:_jsx(Input,{value:g.value,onChange:function(p){g.onChange(p.target.value)}}),children:g.value})};O.default=function(){var A=y(),g=d()(A,1),N=g[0],p=(0,u.useRef)(),M=(0,u.useState)({relation:"and",collapse:!1,children:[{name:"1"},{name:"2"},{relation:"and",collapse:!0,children:[{name:"foo"},{name:"bar"},{relation:"and",collapse:!1,children:[{name:"1"}]},{relation:"and",collapse:!1,children:[{name:"1"}]}]}]}),f=d()(M,2),C=f[0],L=f[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(h.Z,{form:N,onValuesChange:function(se,Q){console.log(Q)},children:(0,r.jsx)(E,{name:"item",initialValue:[{relation:"and",children:[]}],children:function(se,Q){var Ue=Q.add;return(0,r.jsxs)(r.Fragment,{children:[se.map(function(Le){return console.log(se),(0,r.jsx)(h.Z.Item,j()(j()({},Le),{},{children:(0,r.jsx)(s.ZP,{fields:[{name:"test",render:function(ue,ae,fe){return(0,r.jsx)(T.Z,{})}}],relation:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(o.Z.Option,{value:"and",children:"and"}),(0,r.jsx)(o.Z.Option,{value:"or",children:"or"})]})})}))}),(0,r.jsx)("div",{children:(0,r.jsx)(P.ZP,{onClick:function(){return Ue({relation:"and"})},children:"add"})})]})}})})}),(0,r.jsx)("button",{onClick:function(){return p.current.reRender()},children:"re render"}),(0,r.jsx)(_.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(C),valueType:"jsonCode"})]})}},60694:function(ie,O,e){e.r(O);var b=e(5574),j=e.n(b),R=e(46451),d=e(96365),_=e(34041),h=e(67294),T=e(43306),o=e(85893),P=R.Z.useForm;O.default=function(){var u=P(),s=j()(u,1),Z=s[0];return(0,o.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,o.jsx)(R.Z,{form:Z,onValuesChange:function(E,y){console.log(y)},children:(0,o.jsx)(R.Z.Item,{label:"\u89C4\u5219\u6811",name:"rule",initialValue:{relation:"or",children:[{name:"123",sex:"0"}]},required:!0,children:(0,o.jsx)(T.ZP,{fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,o.jsx)(d.Z,{style:{height:32}})}},{name:"name1",rules:[{required:!0}],render:function(){return(0,o.jsx)(d.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(E){var y=E.getFieldValue("name");return y==="love"?(0,o.jsx)("div",{children:"is just a lie."}):(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"0",children:"\u7537"}),(0,o.jsx)(_.Z.Option,{value:"1",children:"\u5973"})]})}}],cascades:["name","name1"],onCascade:function(E,y){console.log(y),E.setFieldValue("sex","1")},relation:(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(_.Z.Option,{value:"and",children:"and"}),(0,o.jsx)(_.Z.Option,{value:"or",children:"or"})]})})})})})}},85911:function(ie,O,e){e.r(O);var b=e(97857),j=e.n(b),R=e(5574),d=e.n(R),_=e(16855),h=e(46451),T=e(96365),o=e(34041),P=e(71577),u=e(67294),s=e(43306),Z=e(2903),r=e(85893),E=h.Z.List,y=h.Z.useForm;O.default=function(){var x=y(),A=d()(x,1),g=A[0],N=(0,u.useState)({relation:"and"}),p=d()(N,2),M=p[0],f=p[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,r.jsx)(h.Z,{form:g,onValuesChange:function(L,H){console.log(H),f(H)},children:(0,r.jsx)(E,{name:"form-list",initialValue:[M],children:function(L,H){var se=H.add;return(0,r.jsxs)(r.Fragment,{children:[L.map(function(Q){return(0,u.createElement)(h.Z.Item,j()(j()({},Q),{},{key:Q.key}),(0,r.jsx)(s.ZP,{fields:[{name:"test",render:function(){return(0,r.jsx)(T.Z,{})}}],relation:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(o.Z.Option,{value:"and",children:"and"}),(0,r.jsx)(o.Z.Option,{value:"or",children:"or"})]})}))}),(0,r.jsx)("div",{children:(0,r.jsx)(P.ZP,{onClick:function(){return se({relation:"and"})},children:"\u6DFB\u52A0\u4E00\u9879"})})]})}})})}),(0,r.jsx)(_.ZP,{fieldProps:{style:{width:"100%"}},mode:"read",text:JSON.stringify(M),valueType:"jsonCode"})]})}},87714:function(ie,O,e){e.r(O);var b=e(96365),j=e(34041),R=e(67294),d=e(43306),_=e(85893);O.default=function(){return(0,_.jsx)("div",{style:{padding:"20px 50px",backgroundColor:"white"},children:(0,_.jsx)(d.ZP,{defaultValue:{relation:"and"},onChange:function(T){console.log(T)},fields:[{name:"name",rules:[{required:!0}],render:function(){return(0,_.jsx)(b.Z,{style:{height:32}})}},{name:"sex",initialValue:"0",render:function(){return(0,_.jsxs)(j.Z,{children:[(0,_.jsx)(j.Z.Option,{value:"0",children:"\u7537"}),(0,_.jsx)(j.Z.Option,{value:"1",children:"\u5973"})]})}}],relation:(0,_.jsxs)(j.Z,{children:[(0,_.jsx)(j.Z.Option,{value:"and",children:"and"}),(0,_.jsx)(j.Z.Option,{value:"or",children:"or"})]})})})}},43306:function(ie,O,e){e.d(O,{ZP:function(){return nr}});var b=e(19632),j=e.n(b),R=e(97857),d=e.n(R),_=e(9783),h=e.n(_),T=e(5574),o=e.n(T),P=e(96486),u=e.n(P),s=e(70129),Z=e(60869),r=e(67294),E=e(51042),y=e(79961),x=e(94184),A=e.n(x),g=e(94906),N=e(51779),p,M,f="RELATION",C="FIELD",L="BUTTON",H="PLACEMENT",se=200,Q=40,Ue=100,Le=40,Te=80,ue=40,ae=50,fe=22,Ae=100,De=20,le=(p={},h()(p,L,Te),h()(p,C,se),h()(p,f,Ue),p),te=(M={},h()(M,L,ue),h()(M,C,Q),h()(M,f,Le),M),_e=Q+fe,Pe="TREE_NODE",Ee=e(52677),Oe=e.n(Ee),Ce=function(n,l){return{position:"absolute",left:n,top:l}},We=function(n){var l={},t=function c(i,a){if(i.relation!==void 0){var D;l[(a?"".concat(a,"."):"")+"relation"]=i.relation,(D=i.children)===null||D===void 0||D.forEach(function(Y,k){c(Y,(a?"".concat(a,"."):"")+"children."+k)})}else for(var I in i)if(i.hasOwnProperty(I)){var F=i[I];l[(a?"".concat(a,"."):"")+I]=Oe()(F)==="object"?u().cloneDeep(F):F}};return t(n,""),l},v=e(85893),He=function(n){var l=n.parentKey,t=n.position,c=n.prefixCls,i=n.text,a=n.canAddRuleDisabled,D=n.canAddRuleGroupDisabled,I=n.handleAdd,F=n.hideAddButton,Y=n.hideAddGroupButton,k=n.hide,J=k===void 0?!1:k;return(0,v.jsx)("div",{style:d()(d()(d()({},Ce(t.x,t.y)),{width:Te,height:ue,lineHeight:"".concat(ue,"px")}),{display:J?"none":void 0}),className:"".concat(c,"-node-button-group"),children:(0,v.jsxs)("div",{className:"".concat(c,"-button-fix-size"),children:[!F&&(0,v.jsx)(g.Z,{overlay:(i==null?void 0:i.addRule)||"\u6DFB\u52A0\u89C4\u5219",placement:"top",children:(0,v.jsx)("div",{style:{cursor:a?"not-allowed":"pointer"},className:"".concat(c,"-button-left"),onClick:function(){return!a&&I(l,"FIELD")},children:(0,v.jsx)(E.Z,{style:{width:le[L]/2,color:"#c7d0d9",display:"flex",justifyContent:"center"},rev:void 0})})}),!Y&&(0,v.jsx)(g.Z,{overlay:(i==null?void 0:i.addRelation)||"\u6DFB\u52A0\u89C4\u5219\u7EC4",placement:"top",children:(0,v.jsx)("div",{style:{cursor:D?"not-allowed":"pointer"},className:A()("".concat(c,"-button-right"),h()({},"no-border",F)),onClick:function(){return!D&&I(l,"RELATION")},children:(0,v.jsx)(y.Z,{style:{width:le[L]/2,color:"#c7d0d9",display:"flex",justifyContent:"center"},rev:void 0})})})]})})},Ke=e(96318),_n=e(41393),Ye=function(n){var l=n.toggleCollapse,t=n.child,c=n.relationWidth,i=n.collapse,a=n.hide;return(0,v.jsx)("div",{onClick:function(){l(t.key)},style:{position:"absolute",left:t.position.x+c+4,top:t.position.y+20-11,zIndex:10,display:a?"none":void 0},className:A()("techui-rule-tree-collapse","techui-rule-tree-collapse-".concat(t.namePath.join("-"))),children:i?(0,v.jsx)(Ke.Z,{style:{color:"#8c8c8c"},rev:void 0}):(0,v.jsx)(_n.Z,{style:{color:"#8c8c8c"},rev:void 0})})},cn=e(98958),xe=function(n){var l=n.children;return(0,v.jsx)("div",{children:(0,v.jsx)("div",{style:{display:"flex",height:"100%",rowGap:8,columnGap:8},children:l.filter(function(t){return!!t}).map(function(t,c){var i,a,D,I=!!(t!=null&&(i=t.props)!==null&&i!==void 0&&(a=i.children)!==null&&a!==void 0&&(D=a.props)!==null&&D!==void 0&&D.__should_not_render__);return(0,v.jsx)("div",{style:{display:I?"none":"block"},children:t},c)})})})},vn=function(n){var l=n.children,t=n.disabled,c=n.thisKey,i=n.namePath,a=n.onMove,D=n.dragger,I=n.currentIndex,F=n.rowConfig,Y=(0,cn.c)(function(){return{type:Pe,item:{thisKey:c,namePath:i,from:"internal",currentIndex:I},collect:function(ce){return{isDragging:ce.isDragging()}},end:function(ce,Be){var ve=Be.getDropResult();if(ve&&ce.from==="internal"){var Ze=ve,Je=Ze.parentKey,Xe=Ze.order,qe=Ze.originOrder;a(c,Je,Xe,qe)}},canDrag:!t}},[c,i]),k=o()(Y,3),J=k[0].isDragging,X=k[1],ne=k[2];return(0,v.jsx)("div",{ref:ne,style:{opacity:J?.5:1,width:"100%"},"data-thiskey":c,children:(0,v.jsx)("div",{className:A()(F.className),style:{padding:"0px 8px",borderRadius:3},children:(0,v.jsxs)(xe,{children:[F.draggable&&(0,v.jsx)("div",{ref:X,children:D}),(0,v.jsx)(v.Fragment,{children:l})]})})})},Kn=function(n){var l=n.data,t=n.onDrop,c=n.disabled,i=n.children,a=(0,cn.c)(function(){return{type:Pe,item:{data:l,from:"external"},collect:function(J){return{isDragging:J.isDragging()}},end:function(J,X){var ne=X.getDropResult();ne&&t(u().cloneDeep(J.data),ne.parentKey,ne.order)},canDrag:!c}}),D=o()(a,3),I=D[0].isDragging,F=D[1],Y=D[2];return(0,v.jsx)("div",{ref:Y,style:{opacity:I?"0.5":1},children:(0,v.jsx)("div",{ref:F,children:i})})},Zn=e(98169),xn=function(n){var l=n.relatedKeys,t=n.children,c=n.parentKey,i=n.order,a=n.namePath,D=(0,Zn.L)(function(){return{accept:Pe,collect:function(q){return{isOver:q.isOver(),canDrop:q.canDrop()}},canDrop:function(q){var ce=q.from;if(ce==="internal")return!(a&&q.namePath&&a.join(".").startsWith(q.namePath.join("."))||l.includes(q.thisKey));if(ce==="external")return!0;throw new Error("Unexpect DragItem property from: ".concat(ce,'. "from" should be "external" or "internal".'))},drop:function(q){return d()(d()({},q),{},{parentKey:c,originOrder:i,order:q.currentIndex<i?i-1:i})}}},[l,c,i,a]),I=o()(D,2),F=I[0],Y=F.canDrop,k=F.isOver,J=I[1],X="";return k?X=Y?"rgb(24,144,255)":"red":X="rgb(145,213,255)",(0,v.jsx)("div",{ref:J,style:{backgroundColor:X,opacity:Y?1:0,borderRadius:"3px",border:"dashed 1px rgb(24,144,255)",width:"100%",height:"100%"},"data-p":c,"data-r":l.join(","),"data-namepath":a.join(","),children:t})},Mn=function(n){var l=n.x,t=n.y,c=n.children,i=n.hide,a=i===void 0?!1:i;return(0,v.jsx)("div",{style:d()(d()(d()({},Ce(l,t)),{width:Ae,height:De}),{display:a?"none":void 0}),children:c})},Fn=e(63679),Un=e(36963),bn=function(n){var l=n.children,t=n.noDndProvider;return t?(0,v.jsx)(v.Fragment,{children:l}):(0,v.jsx)(Fn.W,{backend:Un.PD,children:l})},Vn=e(13769),yn=e.n(Vn),Sn=e(85175),pn=e(82061),Rn=e(71744),Nn=["fields","onCascade","cascades","copyable","child","form","disabled","handleCopy","handleRemove","onNodeFocus","onFieldFocus","length","actionsRender","onFieldChange"],Gn=function(n){var l=n.fields,t=n.onCascade,c=n.cascades,i=n.copyable,a=n.child,D=n.form,I=n.disabled,F=n.handleCopy,Y=n.handleRemove,k=n.onNodeFocus,J=n.onFieldFocus,X=n.length,ne=n.actionsRender,q=n.onFieldChange,ce=yn()(n,Nn),Be=ce.currentIndex,ve=ce.rowConfig,Ze=Object.keys(ve).filter(function(pe){return ve[pe]}).length>0,Je=function(){I||F(a.key)},Xe=function(){I||Y(a.key)},qe=(0,v.jsx)(Sn.Z,{className:"".concat(Ie,"-action-copy"),onClick:Je,style:{cursor:I?"not-allowed":"pointer",color:"#595959"},rev:void 0}),mn=(0,v.jsx)(pn.Z,{className:"".concat(Ie,"-action-remove"),onClick:Xe,style:{cursor:I?"not-allowed":"pointer",color:"#595959"},rev:void 0});if(ne){var hn=ne({type:a.type,namePath:a.namePath,isRoot:!a.parent,data:a.data,disabled:I},{remove:Xe,copy:Je}),ln=hn.remove,en=hn.copy;ln&&(mn=ln),en&&(qe=en)}return(0,r.createElement)(vn,d()(d()({},ce),{},{key:"d-".concat(a.namePath.join(",")),rowConfig:ve,dragger:(0,v.jsx)(Rn.Z,{className:"".concat(Ie,"-action-drag"),style:{color:"#595959"},rev:void 0})}),(0,v.jsxs)(xe,{children:[(0,v.jsx)("div",{onClick:function(){var on={getData:function(){return a.data},getKey:function(){return a.key}};k&&k(on)},children:(0,v.jsx)(xe,{children:l&&l.map(function(pe){var on=pe.render,Re=pe.name,Fe=pe.rules,be=[a.namePath.join(".")].concat(Re),un={getFieldValue:function(je){return D.getFieldValue([a.namePath.join(".")].concat(je))},getFieldError:function(){return D.getFieldError(be)},setFieldValue:function(je,Ve){D.setFields([{name:[a.namePath.join(".")].concat(je),value:Ve}])}},Me=on(un,a,{index:Be,length:X}),$e=Me===!1;return(0,v.jsx)("div",{"data-namepath":be,style:{minHeight:32},children:(0,v.jsx)(s.gN,{name:be,rules:$e?void 0:Fe,initialValue:a.data[Re],shouldUpdate:function(je,Ve){return!u().isEqual(u().get(je,a.namePath),u().get(Ve,a.namePath))},__should_not_render__:$e,children:function(je){var Ve=function(Ne){var nn,ke=Oe()(Ne)==="object"&&Ne.target?Ne.target.value:Ne;if(q==null||q(Re,ke,a.data[Re],a),(nn=je.onChange)===null||nn===void 0||nn.call(je,Ne),t&&c!==null&&c!==void 0&&c.includes(Re)){var ee;t({getFieldError:un.getFieldError,getFieldValue:un.getFieldValue,setFieldValue:function(G,Pn){a.data[G]=Pn}},Re),(ee=je.onChange)===null||ee===void 0||ee.call(je,Ne)}},Qe=function(){J==null||J(a.key,Re,je.value,a.data)};return typeof Me=="function"?(Me=Me(je.value,Ve),console.error("\u4F7F\u7528 render: ()=>(value,onChange)=>React.ReactElement \u4F1A\u5BFC\u81F4\u6E32\u67D3\u95EE\u9898\uFF0C\u590D\u6742\u7EC4\u4EF6\u8BF7\u4F7F\u7528\uFF1Arender : ()=> <YourComponent />"),(0,v.jsx)("div",{onClick:Qe,children:Me})):r.isValidElement(Me)?(0,v.jsx)("div",{onClick:Qe,children:r.cloneElement(Me,d()(d()(d()({disabled:I},Me.props),typeof Me=="function"?{}:{value:je.value,onChange:Ve}),{},{key:"field-component-".concat(be.join(","))}))}):(0,v.jsx)("div",{onClick:Qe,children:Me})}})},be.join("."))})})}),Ze&&(0,v.jsxs)(xe,{children:[ve.copyable&&qe,ve.removable&&mn]})]}))},Hn=["child","relation","disabled","onRemoveRelation","relationRemovable","getChildrenData","rowConfig","actionsRender"],Yn=function(n){var l=n.child,t=n.relation,c=n.disabled,i=n.onRemoveRelation,a=n.relationRemovable,D=n.getChildrenData,I=n.rowConfig,F=n.actionsRender,Y=yn()(n,Hn),k=I.removable,J=(0,v.jsx)(pn.Z,{style:{cursor:"pointer"},onClick:function(){i(l.key)},rev:void 0});if(F){var X=F({type:l.type,namePath:l.namePath,isRoot:!l.parent,data:l.data,disabled:c},{remove:function(){i(l.key)}}),ne=X.remove;ne&&(J=ne)}return(0,v.jsx)(vn,d()(d()({},Y),{},{rowConfig:I,dragger:(0,v.jsx)(Rn.Z,{style:{color:"#595959"},rev:void 0}),children:(0,v.jsxs)(xe,{children:[(0,v.jsx)(s.gN,{name:[l.namePath.join(".")].concat(["relation"]),initialValue:l.data.relation,children:function(ce){var Be=typeof t=="function"?t({depth:l.depth,parent:l.parent.data,brothers:l.parent.children.filter(function(ve){return ve.type!==L&&ve.key!==l.key}).map(function(ve){return d()({},ve.data)}),data:D(l)}):t;return r.cloneElement(Be,d()(d()({disabled:c},Be.props),ce))}}),k&&J]})}))},Jn=function(n){var l=n.prefixCls,t=n.relationWidth,c=n.relation,i=n.disabled,a=n.node,D=n.getChildrenData,I=n.hide,F=n.className,Y=n.rowConfig;return(0,v.jsx)("div",{className:A()("".concat(l,"-node-root"),Y.className,h()({},F,F)),style:d()(d()(d()({},Ce(a.position.x,a.position.y)),{width:t,height:Le,lineHeight:"".concat(Le,"px")}),I?{display:"none"}:{}),children:(0,v.jsx)(s.gN,{name:["relation"],initialValue:a.data.relation,shouldUpdate:function(J,X){var ne="relation";return J[ne]!==X[ne]},children:function(J){var X=typeof c=="function"?c({depth:a.depth,parent:null,brothers:null,selfData:a.data,data:D(a)}):c;return r.cloneElement(X,d()(d()({disabled:i},X.props),J))}})})},Xn=function(n){var l=n.fromX,t=n.fromY,c=n.toX,i=n.toY,a=n.radius,D=n.stroke,I=D===void 0?"#c7d0d9":D,F=l+(c-l)/2;if(t===i)return r.createElement("path",{d:"M".concat(l,",").concat(t," L").concat(c,",").concat(i),stroke:I,fill:"none",style:{strokeWidth:1}});var Y=[];if(a){var k=i>t?a:-a,J=Math.abs(a);Y.push("M".concat(l,",").concat(t," L").concat(F-J,",").concat(t)),Y.push("C".concat(F-J,",").concat(t," ").concat(F,",").concat(t," ").concat(F,",").concat(t+k)),Y.push("L".concat(F,",").concat(i-k)),Y.push("C".concat(F,",").concat(i-k," ").concat(F,",").concat(i," ").concat(F+J,",").concat(i)),Y.push("L".concat(c,",").concat(i))}else Y.push("M".concat(l,",").concat(t," L").concat(F,",").concat(t)),Y.push("M".concat(F,",").concat(t," L").concat(F,",").concat(i)),Y.push("M".concat(F,",").concat(i," L").concat(c,",").concat(i));return r.createElement("path",{d:Y.join(" "),stroke:I,fill:"none",style:{strokeWidth:1}})},$n=function(n){var l=n.x,t=n.fromY,c=n.toY,i=n.whiteGap,a=i===void 0?20:i,D=l-a,I=[];return I.push("M".concat(l,",").concat(t," L").concat(D,",").concat(t)),I.push("M".concat(D,",").concat(t," L").concat(D,",").concat(c)),I.push("M".concat(D,",").concat(c," L").concat(l,",").concat(c)),r.createElement("path",{d:I.join(" "),stroke:"#c7d0d9",fill:"none",style:{strokeWidth:1}})},zn=e(12444),Qn=e.n(zn),kn=e(72004),wn=e.n(kn),Tn=function(){function de(n,l){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=arguments.length>3?arguments[3]:void 0;Qn()(this,de),h()(this,"root",void 0),h()(this,"nodes",[]),h()(this,"key",0),h()(this,"collapsible",!1),this.root=this.createNode(n,l,!1,c),this.nodes.push(this.root),this.collapsible=t}return wn()(de,[{key:"isRoot",value:function(l){return l===this.root}},{key:"getRoot",value:function(){return this.root}},{key:"toggleCollapse",value:function(l){var t=this.findByKey(l);t.collapse=!t.collapse}},{key:"shouldCollapse",value:function(l){for(var t=this.findByKey(l),c=t.collapse,i=t;i.parent;){if(i.parent.collapse){c=!0;break}i=i.parent}return c}},{key:"createNode",value:function(l,t){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.key+=1,{data:l,parent:void 0,children:void 0,key:this.key-1,depth:this.root?NaN:0,height:NaN,type:t,namePath:[],collapse:c,preserveData:i}}},{key:"dfs",value:function(l,t){var c=this;l.children&&l.children.forEach(function(i){c.dfs(i,t),t(i)}),t(l)}},{key:"bfs",value:function(l,t){var c=this;t(l),l.children&&l.children.forEach(function(i){c.bfs(i,t)})}},{key:"find",value:function(l,t){var c;return this.bfs(this.root,function(i){i[l]===t&&(c=i)}),c}},{key:"findByKey",value:function(l){var t=this.nodes.find(function(c){return c.key===l});if(!t)throw new Error("Can't find node by key ".concat(l));return t}},{key:"appendToRoot",value:function(l){var t=this.root.key;this.appendByKey(t,l)}},{key:"appendByKey",value:function(l,t,c){var i=this,a=this.find("key",l);return a?(a.children||(a.children=[]),Object.assign(t,{parent:a}),Object.assign(t,{depth:a.depth+1}),t.children&&this.bfs(t,function(D){D!==t&&(i.nodes.push(D),Object.assign(D,{depth:D.parent.depth+1}))}),c!=null&&c.toString()?a.children.splice(c,0,t):a.children.push(t),this.nodes.push(t),this.root):!1}},{key:"removeByKey",value:function(l){var t,c=this.find("key",l);if(!c)return t;var i=c.parent;i.children.forEach(function(D,I){D.key===l&&(t=i.children.splice(I,1))});var a=[];return this.bfs(t[0],function(D){a.push(D.key)}),this.nodes=this.nodes.filter(function(D){return!a.includes(D.key)}),t}},{key:"move",value:function(l,t,c){var i=this.removeByKey(l);if(!i)return!1;var a=this.appendByKey(t,i[0],c);return!!a}},{key:"render",value:function(){for(var l=this,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];c.forEach(function(a){var D=a.order,I=a.renderFunction;D==="dfs"?l.dfs(l.root,I):l.bfs(l.root,I)})}},{key:"getChildrenData",value:function(l){var t=this,c=function i(a){var D={},I=a.data,F=a.children,Y=a.collapse,k=a.type,J=a.preserveData;if(Object.assign(D,I),Object.assign(D,J),k==="RELATION"&&t.collapsible&&Object.assign(D,{collapse:Y}),F){var X=[];F.forEach(function(ne){ne.type!=="BUTTON"&&X.push(i(ne))}),Object.assign(D,{children:X})}return D};return c(l)}},{key:"getPureData",value:function(){return this.getChildrenData(this.root)}},{key:"getMaxLeft",value:function(){for(var l=this.nodes,t=0,c=0;c<l.length;c++){var i,a,D=l[c];if((i=D.position)!==null&&i!==void 0&&i.x&&(!t||((a=D.position)===null||a===void 0?void 0:a.x)>t)){var I;t=(I=D.position)===null||I===void 0?void 0:I.x}}return t}}],[{key:"initWithData",value:function(l,t,c){var i=l;if(!i.hasOwnProperty("relation"))throw new Error('"relation" no exist in initial data.');var a=u().omit(i,["relation","children"]),D=new de({relation:i.relation},"RELATION",t,a),I=function F(Y,k){var J=k.children;J==null||J.forEach(function(X){var ne=X.hasOwnProperty("relation"),q=null;if(ne){var ce=u().omit(X,["relation","children"]),Be=u().pick(X,["relation"]);q=D.createNode(d()({},Be),"RELATION",X.collapse,ce)}else{var ve=u().omit(X,c),Ze=u().pick(X,c);q=D.createNode(d()({},Ze),"FIELD",X.collapse,ve)}D.appendByKey(Y,q),X.children&&F(q.key,X)})};return I(D.getRoot().key,i),u().cloneDeep(D)}}]),de}(),Ie="techui-rule-tree",qn=function(n){var l=n.value,t=n.onChange,c=n.fields,i=n.relation,a=n.disabled,D=n.style,I=n.text,F=n.cascades,Y=n.relationWidth,k=Y===void 0?120:Y,J=n.defaultRelationValue,X=J===void 0?"and":J,ne=n.actionRef,q=n.onCascade,ce=n.extraDragItemRender,Be=n.canAddRule,ve=n.canAddRuleGroup,Ze=n.onNodeFocus,Je=n.copyable,Xe=n.description,qe=n.defaultValue,mn=n.hideButton,hn=n.noDrag,ln=n.collapsible,en=ln===void 0?!1:ln,pe=n.relationRemovable,on=n.onFieldFocus,Re=n.mode,Fe=Re===void 0?"tree":Re,be=n.noDndProvider,un=be===void 0?!1:be,Me=n.modifyRow,$e=n.modifyTreeNode,ze=n.actionsRender,je=n.onRemove,Ve=n.onFieldChange,Qe=n.shouldRemoveRelation,Se=k+(pe&&!a?20:0)-(a?20:0),Ne=(0,Z.Z)(qe,{value:l,onChange:t}),nn=o()(Ne,2),ke=nn[0],ee=nn[1],Dn=c.map(function(re){return re.name}),G=(0,r.useRef)(Tn.initWithData(ke,en,Dn)),Pn=(0,r.useState)(0),rr=o()(Pn,2),An=rr[1],tr=function(){return An(function(U){return U+1})},ar=function(U){G.current=U,tr()},lr=(0,s.cI)(),or=o()(lr,1),dn=or[0],we=function(){var U;return(U=G.current)===null||U===void 0?void 0:U.getPureData()},In=function(){return c.reduce(function(U,K){var $=K.initialValue,V=K.name;return u().merge(U,h()({},V,$))},{})},ir=function(U,K){var $,V,S=In(),m=($=G.current)===null||$===void 0?void 0:$.createNode(K==="RELATION"?{relation:X}:S,K);if((V=G.current)===null||V===void 0||V.appendByKey(U,m),K===f){var W,z,w=(W=G.current)===null||W===void 0?void 0:W.createNode(S,"FIELD");(z=G.current)===null||z===void 0||z.appendByKey(m.key,w)}ee==null||ee(we())},ur=function(U,K,$){var V,S=(V=G.current)===null||V===void 0?void 0:V.find("key",K);if(S){var m,W,z=U||In(),w=(m=G.current)===null||m===void 0?void 0:m.createNode(z,"FIELD");(W=G.current)===null||W===void 0||W.appendByKey(K,w,$),ee==null||ee(we())}},dr=function(U){var K=We(U);Object.keys(K).forEach(function($){var V=$.split(".").filter(function(m){return m!=="children"});if(V.join("")){var S=V;V.length>2&&(S=[V.slice(0,-1).join(".")].concat(u().last(V))),dn.setFields([{name:S,value:K[$]}])}})},sr=(0,r.useRef)({validate:function(){return dn.validateFields()},setData:function(U,K){var $,V,S=($=G.current)===null||$===void 0?void 0:$.find("key",U);S&&(S.data=K,ee==null||ee((V=G.current)===null||V===void 0?void 0:V.getPureData()))},reRender:function(){An(function(U){return U+1})}});ne&&u().set(ne,"current",sr.current),(0,r.useEffect)(function(){ke&&(ar(Tn.initWithData(ke,en,Dn)),new Promise(function(){dr(ke)}))},[ke]),(0,r.useEffect)(function(){dn.validateFields()},[]);var On=function re(U){var K,$,V,S=(K=G.current)===null||K===void 0?void 0:K.find("key",U);if(je){var m=je(S.type,S.namePath,S.data);if(!m)return}if(S.type==="FIELD"&&Qe!==null&&Qe!==void 0&&Qe(S)){re(S.parent.key);return}var W=S.parent;($=G.current)===null||$===void 0||$.removeByKey(U),!((V=G.current)!==null&&V!==void 0&&V.isRoot(W))&&W.children.length===1&&W.children[0].type===L&&re(W.key),ee==null||ee(we())},_r=function(U){var K,$=(K=G.current)===null||K===void 0?void 0:K.find("key",U);if($){var V,S,m=$.data,W=$.parent,z=(V=G.current)===null||V===void 0?void 0:V.createNode(u().clone(m),"FIELD");(S=G.current)===null||S===void 0||S.appendByKey(W.key,z),ee==null||ee(we())}},Bn=function(U,K,$,V){var S,m,W=(S=G.current)===null||S===void 0?void 0:S.find("key",U),z=W.parent,w=(m=G.current)===null||m===void 0?void 0:m.find("key",K);if(w.namePath.length!==W.namePath.length-1){var oe;(oe=G.current)===null||oe===void 0||oe.move(U,K,V)}else{var me;(me=G.current)===null||me===void 0||me.move(U,K,$)}z.type===f&&z.children.length===1&&z.children[0].type===L&&On(z.key),ee==null||ee(we())},cr=function(U){G.current.toggleCollapse(U),ee(we())},vr=function(){var U,K=[],$=[],V=0;return(U=G.current)===null||U===void 0||U.render({order:"bfs",renderFunction:function(m){var W,z=(W=m.children)===null||W===void 0?void 0:W.filter(function(B){return B.type===L})[0];if(z){var w;(w=G.current)===null||w===void 0||w.removeByKey(z.key)}if(!mn&&m.type===f){var oe,me,he=(oe=G.current)===null||oe===void 0?void 0:oe.createNode({},"BUTTON");(me=G.current)===null||me===void 0||me.appendByKey(m.key,he)}}},{order:"dfs",renderFunction:function(m){var W;if(m.children&&!m.collapse){var z=m.children.reduce(function(w,oe){return w+oe.height},0);Object.assign(m,{height:z})}else Object.assign(m,{height:_e});(W=G.current)!==null&&W!==void 0&&W.isRoot(m)&&(V=m.height)}},{order:"bfs",renderFunction:function(m){m.parent?Object.assign(m,{namePath:m.parent.namePath.slice().concat(u().indexOf(m.parent.children,m).toString())}):Object.assign(m,{namePath:[]})}},{order:"bfs",renderFunction:function(m){var W;if((W=G.current)!==null&&W!==void 0&&W.isRoot(m)&&Object.assign(m,{position:{x:Fe==="tree"?0:0-Se,y:(V-Q)/2+20}}),m.type===f){var z=m.children;if(!z)return;var w=z.reduce(function(oe,me){return oe+me.height},0);z.forEach(function(oe,me){var he;if(me>0){var B=z[me-1];he=B.position.y+B.height/2+oe.height/2}else he=m.position.y-(w-_e)/2+(oe.height-_e)/2;Object.assign(oe,{position:{x:m.position.x+Se+ae,y:he}})})}}},{order:"bfs",renderFunction:function(m){var W;if((W=G.current)!==null&&W!==void 0&&W.isRoot(m)){var z=m.children;if((z==null?void 0:z.length)>1){var w=u().first(z),oe=u().last(z);Object.assign(m,{position:{x:0,y:(w.position.y+oe.position.y)/2}})}}}},{order:"bfs",renderFunction:function(m){var W,z={copyable:Je,draggable:!(hn||a),removable:!a,className:""},w=m.children,oe=m.key;if((W=G.current)!==null&&W!==void 0&&W.isRoot(m)){var me=(0,P.cloneDeep)(z);Fe==="tree"&&$e&&(me=d()(d()({},me),$e({type:m.type,namePath:m.namePath,data:m.data,isRoot:!0}))),K.push((0,v.jsx)(Jn,{rowConfig:me,hide:Fe==="list",node:m,prefixCls:Ie,relationWidth:Se,relation:i,disabled:!!a,getChildrenData:function(){return G.current.getPureData()},className:"".concat(Ie,"-").concat(m.type.toLowerCase())},m.key))}var he=G.current.shouldCollapse(oe);w&&w.forEach(function(B,ge){var ye=B.type,rn=B.collapse,tn=B.position,En=tn.x,sn=tn.y;if(ye===L){var fn={depth:B.depth,parent:B.parent.data,brothers:B.parent.children.filter(function(Ge){return Ge.type!==L}).map(function(Ge){return d()({},Ge.data)})},Ln=ve?ve(u().cloneDeep(fn)):!0,Wn=Be?Be(u().cloneDeep(fn)):!0,mr=a||!Ln,hr=a||!Wn;K.push((0,v.jsx)(He,{hide:he,hideAddButton:Wn==="hide",hideAddGroupButton:Ln==="hide"||Fe==="list",canAddRuleDisabled:hr,canAddRuleGroupDisabled:mr,position:B.position,text:I,parentKey:m.key,prefixCls:Ie,handleAdd:ir},B.key))}else{var jn,gn;K.push((0,v.jsx)(Mn,{hide:he,x:En,y:ge?w[ge-1].position.y+(sn-w[ge-1].position.y)/2+De/2:sn-De,children:(0,v.jsx)(xn,{order:ge,parentKey:m.key,namePath:B.namePath,relatedKeys:ge>0?[B.key,(jn=m.parent)===null||jn===void 0?void 0:jn.key,w[ge-1].key]:[B.key,(gn=m.parent)===null||gn===void 0?void 0:gn.key]})},"p".concat(B.key)));var an=d()(d()({},(0,P.cloneDeep)(z)),{removable:ye==="FIELD"?!0:pe});if(Fe==="list"&&Me&&B.type==="FIELD"&&(an=d()(d()({},an),Me({index:ge,length:w.filter(function(Ge){return Ge.type!=="BUTTON"}).length,data:B.data}))),Fe==="tree"&&$e&&(an=d()(d()({},an),$e({type:B.type,namePath:B.namePath,data:B.data,isRoot:!1}))),ye===f&&en&&K.push((0,v.jsx)(Ye,{collapse:rn,child:B,toggleCollapse:cr,relationWidth:Se,hide:he},B.key+"-collapse")),K.push((0,v.jsx)("span",{"data-height":B.height,style:d()(d()(d()({},Ce(B.position.x,B.position.y)),{width:ye===C?"auto":Se,height:te[ye],lineHeight:"".concat(te[ye],"px")}),{},{display:he?"none":void 0}),className:"".concat(Ie,"-node-drag-container"),tabIndex:B.key,children:(0,v.jsx)("div",{className:"".concat(Ie,"-node-container ").concat(Ie,"-").concat(ye.toLowerCase()),children:ye===f?(0,v.jsx)(Yn,{child:B,relation:i,disabled:!!a,onMove:Bn,thisKey:B.key,namePath:B.namePath,rowConfig:an,onRemoveRelation:On,relationRemovable:!!pe,getChildrenData:function(Er){return G.current.getChildrenData(Er)},currentIndex:ge,actionsRender:ze},"r-".concat(B.namePath.join(","))):(0,v.jsx)(Gn,{fields:c,onCascade:q,cascades:F,copyable:Je,child:B,form:dn,disabled:!!a,handleCopy:_r,handleRemove:On,onMove:Bn,thisKey:B.key,namePath:B.namePath,rowConfig:an,onNodeFocus:Ze,onFieldFocus:on,currentIndex:ge,length:w.filter(function(Ge){return Ge.type!=="BUTTON"}).length,actionsRender:ze,onFieldChange:Ve},"f-".concat(B.namePath.join(",")))})},B.key.toString())),ge===w.length-2){var Cn;K.push((0,v.jsx)(Mn,{x:En,y:sn+Q+fe/2-De/2,hide:he,children:(0,v.jsx)(xn,{order:ge+1,parentKey:m.key,relatedKeys:[B.key,(Cn=m.parent)===null||Cn===void 0?void 0:Cn.key],namePath:B.namePath})},"ep".concat(B.key)))}}})}},{order:"bfs",renderFunction:function(m){if(Fe==="tree"){if(m.type===f){var W=m.children,z=m.key,w=m.position,oe=w.x,me=w.y;W!=null&&W.length&&!G.current.shouldCollapse(z)&&W.forEach(function(B){var ge=B.type,ye=B.position,rn=ye.x,tn=ye.y;$.push((0,v.jsx)(Xn,{fromX:oe+Se,fromY:me+te[f]/2,toX:rn,toY:tn+te[ge]/2},"svg-".concat(m.key,"-").concat(B.key)))})}}else if(m.type===f){var he=m.children;he!=null&&he.length&&he.forEach(function(B,ge){if(ge!==he.length-1){var ye=B.type,rn=B.position,tn=rn.x,En=rn.y,sn=he[ge+1].position,fn=sn.y;$.push((0,v.jsx)($n,{x:tn,fromY:En+te[f]/2,toY:fn+te[ye]/2},"svg-".concat(m.key,"-").concat(B.key)))}})}}}),K.push((0,v.jsx)("svg",{style:{pointerEvents:"none",position:"absolute",left:0,top:0},width:G.current.getMaxLeft()+20,height:V,children:$},"svg")),(0,v.jsx)("div",{style:{height:V,width:"100%",paddingTop:20,boxSizing:"content-box",position:"relative"},children:K})};return(0,v.jsx)("div",{style:D,className:"".concat(Ie,"-container"),children:(0,v.jsx)(bn,{noDndProvider:un,children:(0,v.jsxs)(s.ZP,{component:"div",form:dn,onValuesChange:u().debounce(function(re){var U=(0,P.cloneDeep)(we());Object.keys(re).forEach(function(K){var $=re[K],V=K==="relation"?K:K.split(".").reduce(function(m,W){return[].concat(j()(m),["children",W])},[]).join("."),S=K==="relation"?$:d()(d()({},u().get(U,V)),$);u().set(U,V,S)}),ee==null||ee(U)},100),children:[(0,v.jsxs)("div",{style:{display:"flex",flexGrow:0,flexShrink:0,position:"relative",flexDirection:"column"},children:[Xe&&(0,v.jsx)("div",{className:"".concat(Ie,"-desc"),children:Xe}),vr()]}),ce&&ce(function(re){var U=re.data,K=re.onDragEnd,$=re.render;return(0,v.jsx)(Kn,{data:U,disabled:a,onDrop:function(S,m,W){K&&K(S),ur(S,m,W)},children:$(U)},JSON.stringify(U))})]})},"rule-tree-provider")})},er=qn,nr=er},2903:function(){}}]);
